{% extends "workshop/base.html" %}

{% block title %}×¨×©×™××ª ×œ×§×•×—×•×ª{% endblock %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>ğŸ‘¥ ×¨×©×™××ª ×œ×§×•×—×•×ª</h2>
        <a href="{% url 'customer_form' %}" style="background-color: #007bff; color: white; padding: 10px 15px; text-decoration: none; border-radius: 5px;">
            â• ×”×•×¡×£ ×œ×§×•×— ×—×“×©
        </a>
    </div>

    <!-- ×œ×§×•×—×•×ª ×¢× ×—×©×‘×•×Ÿ ××©×ª××© -->
    <div style="margin-bottom: 30px;">
        <h3 style="color: #28a745;">ğŸŸ¢ ×œ×§×•×—×•×ª ×¨×©×•××™× ×‘××¢×¨×›×ª ({{ customers_with_user.count }})</h3>
        <p style="color: #666; font-size: 0.9em;">×œ×§×•×—×•×ª ×©× ×¨×©××• ×‘×¢×¦×× ×•×™×›×•×œ×™× ×œ×”×ª×—×‘×¨ ×œ××¢×¨×›×ª</p>
        
        {% if customers_with_user %}
        <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; border: 1px solid #dee2e6;">
            {% for customer in customers_with_user %}
            <div style="display: flex; justify-content: space-between; padding: 10px; margin-bottom: 10px; background-color: white; border-radius: 5px; border: 1px solid #e9ecef;">
                <div>
                    <strong>{{ customer.name }}</strong>
                    <br>
                    <small style="color: #666;">
                        ğŸ“ {{ customer.phone }} 
                        {% if customer.email %}| ğŸ“§ {{ customer.email }}{% endif %}
                        | ğŸ‘¤ ××©×ª××©: {{ customer.user.username }}
                    </small>
                </div>
                <div style="font-size: 0.8em; color: #28a745;">
                    âœ… ×™×›×•×œ ×œ×”×ª×—×‘×¨
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p style="color: #666; font-style: italic;">××™×Ÿ ×œ×§×•×—×•×ª ×¨×©×•××™× ×¢×“×™×™×Ÿ</p>
        {% endif %}
    </div>

    <!-- ×œ×§×•×—×•×ª ×œ×œ× ×—×©×‘×•×Ÿ ××©×ª××© -->
    <div>
        <h3 style="color: #ffc107;">ğŸŸ¡ ×¤×¨×˜×™ ×§×©×¨ ×‘×œ×‘×“ ({{ customers_without_user.count }})</h3>
        <p style="color: #666; font-size: 0.9em;">×œ×§×•×—×•×ª ×©× ×•×¦×¨×• ×¢"×™ ×”×× ×”×œ - ×œ×œ× ××¤×©×¨×•×ª ×”×ª×—×‘×¨×•×ª</p>
        
        {% if customers_without_user %}
        <div style="background-color: #fff8e1; padding: 15px; border-radius: 8px; border: 1px solid #ffe0b2;">
            {% for customer in customers_without_user %}
            <div style="display: flex; justify-content: space-between; padding: 10px; margin-bottom: 10px; background-color: white; border-radius: 5px; border: 1px solid #ffcc02;">
                <div>
                    <strong>{{ customer.name }}</strong>
                    <br>
                    <small style="color: #666;">
                        ğŸ“ {{ customer.phone }} 
                        {% if customer.email %}| ğŸ“§ {{ customer.email }}{% endif %}
                    </small>
                </div>
                <div style="font-size: 0.8em; color: #ff8f00;">
                    âš ï¸ ×¨×§ ×¤×¨×˜×™ ×§×©×¨
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p style="color: #666; font-style: italic;">××™×Ÿ ×¤×¨×˜×™ ×§×©×¨ ×©× ×•×¦×¨×• ×¢"×™ ×”×× ×”×œ</p>
        {% endif %}
    </div>

    <!-- ×”×¡×‘×¨ -->
    <div style="margin-top: 30px; padding: 15px; background-color: #e3f2fd; border-radius: 8px; border: 1px solid #bbdefb;">
        <h4>ğŸ’¡ ×”×¡×‘×¨ ×¢×œ ×¡×•×’×™ ×”×œ×§×•×—×•×ª:</h4>
        <ul style="margin: 10px 0;">
            <li><strong>×œ×§×•×—×•×ª ×¨×©×•××™× (×™×¨×•×§):</strong> × ×¨×©××• ×‘×¢×¦×× ×“×¨×š ×“×£ ×”×”×¨×©××”, ×™×›×•×œ×™× ×œ×”×ª×—×‘×¨ ×•×œ×“×•×•×— ×ª×§×œ×•×ª</li>
            <li><strong>×¤×¨×˜×™ ×§×©×¨ (×¦×”×•×‘):</strong> × ×•×¦×¨×• ×¢"×™ ×”×× ×”×œ/××›×•× ××™, ××©××©×™× ×¨×§ ×œ×ª×™×¢×•×“ ×•×™×¦×™×¨×ª ×ª×™×§×•× ×™×</li>
        </ul>
        <p style="margin: 10px 0; color: #1565c0;">
            <strong>×”××œ×¦×”:</strong> ×¢×•×“×“ ×œ×§×•×—×•×ª ×œ×”×™×¨×©× ×‘×¢×¦×× ×›×“×™ ×©×™×•×›×œ×• ×œ×¢×§×•×‘ ××—×¨ ×”×ª×™×§×•× ×™× ×•×œ×“×•×•×— ×ª×§×œ×•×ª.
        </p>
    </div>
</div>
{% endblock %}
