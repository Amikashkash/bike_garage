{% extends "workshop/base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-slate-900 via-emerald-900 to-slate-900">
    <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
        
        <!-- Header Section -->
        <div class="text-center mb-6 sm:mb-8">
            <div class="mb-6">
                <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold gradient-text mb-4">
                    ğŸš² {{ title }}
                    <span class="text-2xl sm:text-3xl lg:text-4xl text-emerald-300">âœ¨</span>
                </h1>
                <p class="text-slate-300 text-base sm:text-lg max-w-2xl mx-auto leading-relaxed">
                    ×”×•×¡×£ ××•×¤× ×™×™× ×—×“×©×™× ×œ××¢×¨×›×ª ×•×ª×ª×—×™×œ ×œ×¢×§×•×‘ ××—×¨ ×”×ª×™×§×•× ×™× ×©×œ×”×
                </p>
            </div>
        </div>
        
        <!-- Main Form Card -->
        <div class="glass-card border border-emerald-400/30 rounded-2xl backdrop-blur-xl bg-slate-800/40 shadow-2xl overflow-hidden">
            
            <!-- Card Header -->
            <div class="border-b border-slate-600/30 p-4 sm:p-6">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-plus-circle text-white text-lg"></i>
                    </div>
                    <div>
                        <h2 class="text-xl sm:text-2xl font-bold text-white">×¤×¨×˜×™ ×”××•×¤× ×™×™× ×”×—×“×©×™×</h2>
                        <p class="text-slate-400 text-sm">××œ× ××ª ×”×¤×¨×˜×™× ×”×‘×¡×™×¡×™×™× ×©×œ ×”××•×¤× ×™×™×</p>
                    </div>
                </div>
            </div>
            
            <!-- Form Content -->
            <div class="p-4 sm:p-6">
                <form method="post" id="addBikeForm" class="space-y-6">
                    {% csrf_token %}
                    
                    <!-- Brand Field -->
                    <div class="form-group">
                        <label class="form-label text-white font-semibold mb-3 flex items-center gap-2" for="{{ form.brand.id_for_label }}">
                            <i class="fas fa-industry text-orange-400"></i>
                            {{ form.brand.label }}
                            <span class="text-red-400">*</span>
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-industry text-slate-400"></i>
                            </div>
                            <input type="text" 
                                   name="{{ form.brand.name }}" 
                                   id="{{ form.brand.id_for_label }}"
                                   value="{{ form.brand.value|default:'' }}"
                                   class="mercury-input w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/30 transition-all duration-300"
                                   placeholder="×“×•×’××”: Trek, Giant, Specialized"
                                   required>
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                <div class="w-2 h-2 bg-emerald-400 rounded-full opacity-0 transition-opacity duration-300" id="brand-indicator"></div>
                            </div>
                        </div>
                        {% if form.brand.errors %}
                            <div class="form-error mt-2 text-red-400 text-sm flex items-center gap-1">
                                <i class="fas fa-exclamation-triangle"></i>
                                {{ form.brand.errors.0 }}
                            </div>
                        {% endif %}
                        <div class="mt-2">
                            <small class="text-slate-400">×©× ×”×—×‘×¨×” ×”×™×¦×¨× ×™×ª ×©×œ ×”××•×¤× ×™×™×</small>
                        </div>
                    </div>
                    
                    <!-- Model Field -->
                    <div class="form-group">
                        <label class="form-label text-white font-semibold mb-3 flex items-center gap-2" for="{{ form.model.id_for_label }}">
                            <i class="fas fa-tag text-cyan-400"></i>
                            {{ form.model.label }}
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-tag text-slate-400"></i>
                            </div>
                            <input type="text" 
                                   name="{{ form.model.name }}" 
                                   id="{{ form.model.id_for_label }}"
                                   value="{{ form.model.value|default:'' }}"
                                   class="mercury-input w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/30 transition-all duration-300"
                                   placeholder="×“×•×’××”: Domane, Defy, Tarmac">
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                <div class="w-2 h-2 bg-cyan-400 rounded-full opacity-0 transition-opacity duration-300" id="model-indicator"></div>
                            </div>
                        </div>
                        {% if form.model.errors %}
                            <div class="form-error mt-2 text-red-400 text-sm flex items-center gap-1">
                                <i class="fas fa-exclamation-triangle"></i>
                                {{ form.model.errors.0 }}
                            </div>
                        {% endif %}
                        <div class="mt-2">
                            <small class="text-slate-400">××•×“×œ ××• ×¡×“×¨×” ×©×œ ×”××•×¤× ×™×™× (××•×¤×¦×™×•× ×œ×™)</small>
                        </div>
                    </div>
                    
                    <!-- Color Field -->
                    <div class="form-group">
                        <label class="form-label text-white font-semibold mb-3 flex items-center gap-2" for="{{ form.color.id_for_label }}">
                            <i class="fas fa-palette text-purple-400"></i>
                            {{ form.color.label }}
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-palette text-slate-400"></i>
                            </div>
                            <input type="text" 
                                   name="{{ form.color.name }}" 
                                   id="{{ form.color.id_for_label }}"
                                   value="{{ form.color.value|default:'' }}"
                                   class="mercury-input w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:border-purple-400 focus:ring-2 focus:ring-purple-400/30 transition-all duration-300"
                                   placeholder="×“×•×’××”: ×©×—×•×¨, ×œ×‘×Ÿ, ××“×•×, ×›×—×•×œ">
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                <div class="w-2 h-2 bg-purple-400 rounded-full opacity-0 transition-opacity duration-300" id="color-indicator"></div>
                            </div>
                        </div>
                        {% if form.color.errors %}
                            <div class="form-error mt-2 text-red-400 text-sm flex items-center gap-1">
                                <i class="fas fa-exclamation-triangle"></i>
                                {{ form.color.errors.0 }}
                            </div>
                        {% endif %}
                        <div class="mt-2">
                            <small class="text-slate-400">×”×¦×‘×¢ ×”×¢×™×§×¨×™ ×©×œ ×”××•×¤× ×™×™× (××•×¤×¦×™×•× ×œ×™)</small>
                        </div>
                    </div>
                    
                    <!-- Popular Colors Quick Select -->
                    <div class="color-suggestions">
                        <label class="text-white font-medium mb-3 block">×¦×‘×¢×™× ×¤×•×¤×•×œ×¨×™×™×:</label>
                        <div class="grid grid-cols-4 sm:grid-cols-6 gap-3">
                            <button type="button" class="color-option w-10 h-10 rounded-full border-2 border-slate-500 hover:border-emerald-400 hover:scale-110 transition-all duration-300 relative overflow-hidden bg-black" data-color="×©×—×•×¨">
                                <span class="sr-only">×©×—×•×¨</span>
                                <i class="fas fa-check absolute inset-0 flex items-center justify-center text-white font-bold opacity-0 transition-opacity duration-300 text-shadow"></i>
                            </button>
                            <button type="button" class="color-option w-10 h-10 rounded-full border-2 border-slate-500 hover:border-emerald-400 hover:scale-110 transition-all duration-300 relative overflow-hidden bg-white" data-color="×œ×‘×Ÿ">
                                <span class="sr-only">×œ×‘×Ÿ</span>
                                <i class="fas fa-check absolute inset-0 flex items-center justify-center text-black font-bold opacity-0 transition-opacity duration-300 text-shadow"></i>
                            </button>
                            <button type="button" class="color-option w-10 h-10 rounded-full border-2 border-slate-500 hover:border-emerald-400 hover:scale-110 transition-all duration-300 relative overflow-hidden bg-red-500" data-color="××“×•×">
                                <span class="sr-only">××“×•×</span>
                                <i class="fas fa-check absolute inset-0 flex items-center justify-center text-white font-bold opacity-0 transition-opacity duration-300 text-shadow"></i>
                            </button>
                            <button type="button" class="color-option w-10 h-10 rounded-full border-2 border-slate-500 hover:border-emerald-400 hover:scale-110 transition-all duration-300 relative overflow-hidden bg-blue-500" data-color="×›×—×•×œ">
                                <span class="sr-only">×›×—×•×œ</span>
                                <i class="fas fa-check absolute inset-0 flex items-center justify-center text-white font-bold opacity-0 transition-opacity duration-300 text-shadow"></i>
                            </button>
                            <button type="button" class="color-option w-10 h-10 rounded-full border-2 border-slate-500 hover:border-emerald-400 hover:scale-110 transition-all duration-300 relative overflow-hidden bg-green-500" data-color="×™×¨×•×§">
                                <span class="sr-only">×™×¨×•×§</span>
                                <i class="fas fa-check absolute inset-0 flex items-center justify-center text-white font-bold opacity-0 transition-opacity duration-300 text-shadow"></i>
                            </button>
                            <button type="button" class="color-option w-10 h-10 rounded-full border-2 border-slate-500 hover:border-emerald-400 hover:scale-110 transition-all duration-300 relative overflow-hidden bg-orange-500" data-color="×›×ª×•×">
                                <span class="sr-only">×›×ª×•×</span>
                                <i class="fas fa-check absolute inset-0 flex items-center justify-center text-white font-bold opacity-0 transition-opacity duration-300 text-shadow"></i>
                            </button>
                            <button type="button" class="color-option w-10 h-10 rounded-full border-2 border-slate-500 hover:border-emerald-400 hover:scale-110 transition-all duration-300 relative overflow-hidden bg-yellow-400" data-color="×¦×”×•×‘">
                                <span class="sr-only">×¦×”×•×‘</span>
                                <i class="fas fa-check absolute inset-0 flex items-center justify-center text-black font-bold opacity-0 transition-opacity duration-300 text-shadow"></i>
                            </button>
                            <button type="button" class="color-option w-10 h-10 rounded-full border-2 border-slate-500 hover:border-emerald-400 hover:scale-110 transition-all duration-300 relative overflow-hidden bg-purple-500" data-color="×¡×’×•×œ">
                                <span class="sr-only">×¡×’×•×œ</span>
                                <i class="fas fa-check absolute inset-0 flex items-center justify-center text-white font-bold opacity-0 transition-opacity duration-300 text-shadow"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Form Actions -->
                    <div class="form-actions pt-6 border-t border-slate-600/30">
                        <div class="flex flex-col sm:flex-row gap-4 sm:justify-center">
                            <button type="submit" 
                                    class="btn-modern success w-full sm:w-auto"
                                    id="submitBtn">
                                <i class="fas fa-plus mr-2"></i>
                                <span class="font-bold">×”×•×¡×£ ××•×¤× ×™×™×</span>
                                <div class="hidden ml-2" id="submitSpinner">
                                    <i class="fas fa-spinner fa-spin"></i>
                                </div>
                            </button>
                            <a href="{% url 'customer_bikes_list' %}" 
                               class="btn-modern secondary w-full sm:w-auto">
                                <i class="fas fa-times mr-2"></i>
                                <span class="font-bold">×‘×™×˜×•×œ</span>
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Info Section -->
        <div class="mt-6 text-center">
            <div class="glass-card border border-blue-400/20 rounded-xl p-4 inline-block">
                <div class="flex items-center gap-2 text-slate-300">
                    <i class="fas fa-info-circle text-blue-400"></i>
                    <small>×œ××—×¨ ×”×•×¡×¤×ª ×”××•×¤× ×™×™× ×ª×•×›×œ ×œ×“×•×•×— ×¢×œ ×ª×§×œ×•×ª ×•×œ×¢×§×•×‘ ××—×¨ ×”×ª×™×§×•× ×™×</small>
                </div>
            </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4">
            <a href="{% url 'customer_report' %}" 
               class="glass-card border border-orange-400/30 rounded-xl p-4 hover:border-orange-400/50 transition-all duration-300 group">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center group-hover:bg-orange-500/30 transition-colors duration-300">
                        <i class="fas fa-exclamation-triangle text-orange-400"></i>
                    </div>
                    <div>
                        <h3 class="text-white font-medium">×“×•×•×— ×ª×§×œ×”</h3>
                        <p class="text-slate-400 text-sm">×“×•×•×— ×¢×œ ×‘×¢×™×” ×¢× ××•×¤× ×™×™× ×§×™×™××•×ª</p>
                    </div>
                </div>
            </a>
            
            <a href="{% url 'customer_bikes_list' %}" 
               class="glass-card border border-blue-400/30 rounded-xl p-4 hover:border-blue-400/50 transition-all duration-300 group">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center group-hover:bg-blue-500/30 transition-colors duration-300">
                        <i class="fas fa-list text-blue-400"></i>
                    </div>
                    <div>
                        <h3 class="text-white font-medium">×”××•×¤× ×™×™× ×©×œ×™</h3>
                        <p class="text-slate-400 text-sm">×¦×¤×” ×•× ×”×œ ××ª ×›×œ ×”××•×¤× ×™×™× ×©×œ×š</p>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸš² Customer add bike form with Mercury design loaded');
    
    // Apply btn-modern styling using Tailwind classes
    const applyBtnModernStyling = () => {
        // Success button styling
        const successButtons = document.querySelectorAll('.btn-modern.success');
        successButtons.forEach(btn => {
            btn.className = 'bg-green-500 w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 :from-emerald-500 hover:to-green-500 text-white font-bold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-emerald-500/40 hover:scale-105 active:scale-95 border border-emerald-500/50 backdrop-blur-sm';
        });
        
        // Secondary button styling
        const secondaryButtons = document.querySelectorAll('.btn-modern.secondary');
        secondaryButtons.forEach(btn => {
            btn.className = 'w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-500 hover:to-slate-600 text-white font-bold rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-slate-500/40 hover:scale-105 active:scale-95 border border-slate-500/50 backdrop-blur-sm';
        });
    };
    
    // Apply gradient text styling
    const applyGradientText = () => {
        const gradientTexts = document.querySelectorAll('.gradient-text');
        gradientTexts.forEach(text => {
            text.classList.add('bg-gradient-to-r', 'from-emerald-500', 'via-cyan-500', 'to-purple-500', 'bg-clip-text', 'text-transparent');
        });
    };
    
    // Apply glass card styling
    const applyGlassCardStyling = () => {
        const glassCards = document.querySelectorAll('.glass-card');
        glassCards.forEach(card => {
            card.classList.add('bg-slate-800/40', 'backdrop-blur-xl', 'hover:bg-slate-800/50', 'hover:-translate-y-1', 'transition-all', 'duration-300');
        });
    };
    
    // Apply mercury input styling
    const applyMercuryInputStyling = () => {
        const inputs = document.querySelectorAll('.mercury-input');
        inputs.forEach(input => {
            // Add mobile font size to prevent zoom on iOS
            if (window.innerWidth <= 640) {
                input.style.fontSize = '16px';
            }
            
            // Enhanced focus effects for desktop
            if (window.innerWidth >= 1024) {
                input.addEventListener('focus', () => {
                    input.classList.add('-translate-y-1', 'shadow-2xl');
                });
                input.addEventListener('blur', () => {
                    input.classList.remove('-translate-y-1', 'shadow-2xl');
                });
            }
        });
    };
    
    // Apply all styling
    applyBtnModernStyling();
    applyGradientText();
    applyGlassCardStyling();
    applyMercuryInputStyling();
    
    // Form elements
    const form = document.getElementById('addBikeForm');
    const brandInput = document.getElementById('{{ form.brand.id_for_label }}');
    const modelInput = document.getElementById('{{ form.model.id_for_label }}');
    const colorInput = document.getElementById('{{ form.color.id_for_label }}');
    const submitBtn = document.getElementById('submitBtn');
    const submitSpinner = document.getElementById('submitSpinner');
    
    // Auto-focus first field
    if (brandInput) {
        setTimeout(() => brandInput.focus(), 500);
    }
    
    // Input validation and indicators with Tailwind classes
    function setupInputValidation(input, indicatorId) {
        const indicator = document.getElementById(indicatorId);
        if (!input || !indicator) return;
        
        input.addEventListener('input', function() {
            if (this.value.length > 0) {
                indicator.classList.remove('opacity-0');
                indicator.classList.add('opacity-100');
                if (this.checkValidity()) {
                    indicator.classList.remove('bg-red-400');
                    indicator.classList.add('bg-emerald-400');
                } else {
                    indicator.classList.remove('bg-emerald-400');
                    indicator.classList.add('bg-red-400');
                }
            } else {
                indicator.classList.add('opacity-0');
                indicator.classList.remove('opacity-100');
            }
        });
        
        input.addEventListener('focus', function() {
            indicator.classList.add('animate-pulse');
        });
        
        input.addEventListener('blur', function() {
            indicator.classList.remove('animate-pulse');
            if (this.value.length > 0 && this.checkValidity()) {
                this.classList.add('border-emerald-500/50');
            }
        });
    }
    
    setupInputValidation(brandInput, 'brand-indicator');
    setupInputValidation(modelInput, 'model-indicator');
    setupInputValidation(colorInput, 'color-indicator');
    
    // Form animation using Tailwind classes
    const animateFormGroups = () => {
        const formGroups = document.querySelectorAll('.form-group');
        formGroups.forEach((group, index) => {
            group.classList.add('opacity-0', 'translate-y-5');
            setTimeout(() => {
                group.classList.remove('opacity-0', 'translate-y-5');
                group.classList.add('opacity-100', 'translate-y-0', 'transition-all', 'duration-600', 'ease-out');
            }, index * 100);
        });
    };
    
    // Apply animations
    animateFormGroups();
    
    // Add necessary minimal CSS via JavaScript for features not available in Tailwind
    const addMinimalCSS = () => {
        const style = document.createElement('style');
        style.textContent = `
            .text-shadow {
                text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);
            }
            
            @keyframes ripple-animation {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
            
            .ripple {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.3);
                transform: scale(0);
                animation: ripple-animation 0.6s linear;
                pointer-events: none;
            }
        `;
        document.head.appendChild(style);
    };
    
    addMinimalCSS();
    
    // Color quick select functionality with Tailwind classes
    const colorOptions = document.querySelectorAll('.color-option');
    colorOptions.forEach(option => {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Remove previous selection
            colorOptions.forEach(opt => {
                opt.classList.remove('border-emerald-500', 'shadow-emerald-500/30');
                opt.classList.add('border-slate-500');
                opt.querySelector('i').classList.add('opacity-0');
                opt.querySelector('i').classList.remove('opacity-100');
            });
            
            // Add selection to clicked option
            this.classList.remove('border-slate-500');
            this.classList.add('border-emerald-500', 'shadow-lg', 'shadow-emerald-500/30');
            this.querySelector('i').classList.remove('opacity-0');
            this.querySelector('i').classList.add('opacity-100');
            
            // Update color input
            const colorName = this.getAttribute('data-color');
            if (colorInput) {
                colorInput.value = colorName;
                colorInput.dispatchEvent(new Event('input'));
                
                // Add visual feedback
                colorInput.classList.add('border-emerald-500/50');
                
                // Animate the input
                colorInput.classList.add('scale-105');
                setTimeout(() => {
                    colorInput.classList.remove('scale-105');
                }, 200);
            }
        });
    });
    
    // Form submission handling
    form.addEventListener('submit', function(e) {
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.innerHTML = `
            <span class="relative z-10 flex items-center justify-center gap-3">
                <i class="fas fa-spinner fa-spin text-lg"></i>
                <span class="text-lg font-bold">××•×¡×™×£ ××•×¤× ×™×™×...</span>
            </span>
            <div class="absolute inset-0 bg-gradient-to-r from-emerald-400 to-green-400 opacity-20 transition-opacity duration-300"></div>
        `;
        
        // Validate required fields
        if (!brandInput.value.trim()) {
            e.preventDefault();
            submitBtn.disabled = false;
            submitBtn.innerHTML = `
                <span class="relative z-10 flex items-center justify-center gap-3">
                    <i class="fas fa-plus text-lg group-hover:rotate-90 transition-transform duration-300"></i>
                    <span class="text-lg font-bold">×”×•×¡×£ ××•×¤× ×™×™×</span>
                </span>
                <div class="absolute inset-0 bg-gradient-to-r from-emerald-400 to-green-400 opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
            `;
            
            brandInput.focus();
            brandInput.style.borderColor = '#ef4444';
            brandInput.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.1)';
            
            setTimeout(() => {
                brandInput.style.borderColor = '';
                brandInput.style.boxShadow = '';
            }, 2000);
            
            return;
        }
        
        // Create success animation
        const successMessage = document.createElement('div');
        successMessage.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
        successMessage.innerHTML = '<i class="fas fa-check mr-2"></i>××•×¡×™×£ ××•×¤× ×™×™×...';
        document.body.appendChild(successMessage);
        
        setTimeout(() => {
            if (document.body.contains(successMessage)) {
                document.body.removeChild(successMessage);
            }
        }, 3000);
    });
    
    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        // Ctrl/Cmd + Enter to submit
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
            e.preventDefault();
            form.dispatchEvent(new Event('submit'));
        }
        
        // Escape to cancel
        if (e.key === 'Escape') {
            const cancelBtn = document.querySelector('a[href*="customer_bikes_list"]');
            if (cancelBtn) cancelBtn.click();
        }
    });
    
    // Auto-save draft (to localStorage)
    const inputs = [brandInput, modelInput, colorInput];
    inputs.forEach(input => {
        if (!input) return;
        
        // Load saved value
        const savedValue = localStorage.getItem(`bike_draft_${input.name}`);
        if (savedValue && !input.value) {
            input.value = savedValue;
            input.dispatchEvent(new Event('input'));
        }
        
        // Save on input
        input.addEventListener('input', function() {
            localStorage.setItem(`bike_draft_${this.name}`, this.value);
        });
    });
    
    // Clear draft on successful submission
    form.addEventListener('submit', function() {
        inputs.forEach(input => {
            if (input) {
                localStorage.removeItem(`bike_draft_${input.name}`);
            }
        });
    });
    
    // Animate form fields on load
    const formGroups = document.querySelectorAll('.form-group');
    formGroups.forEach((group, index) => {
        group.style.animationDelay = `${index * 0.1}s`;
    });
    
    console.log('âœ… Customer add bike form ready with Mercury design');
});

// Add ripple effect for buttons
document.querySelectorAll('button, a[class*="gradient"]').forEach(button => {
    button.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = x + 'px';
        ripple.style.top = y + 'px';
        ripple.className = 'ripple';
        
        this.appendChild(ripple);
        
        setTimeout(() => {
            ripple.remove();
        }, 600);
    });
});

// Add ripple effect CSS
const style = document.createElement('style');
style.textContent = `
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: scale(0);
        animation: ripple-animation 0.6s linear;
        pointer-events: none;
    }
    
    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}