{"version":3,"file":"manager-dashboard.js","sources":["../../../frontend/src/pages/manager/Dashboard.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\n\r\n// Main Dashboard Component\r\nconst ManagerDashboard = () => {\r\n    const [dashboardData, setDashboardData] = useState({\r\n        stuck_repairs: [],\r\n        pending_diagnosis: [],\r\n        pending_approval: [],\r\n        approved_waiting_for_mechanic: [],\r\n        in_progress: [],\r\n        awaiting_quality_check: [],\r\n        repairs_not_collected: []\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        fetchDashboardData();\r\n        const interval = setInterval(fetchDashboardData, 30000); // Refresh every 30 seconds\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const fetchDashboardData = async () => {\r\n        try {\r\n            const response = await fetch('/api/manager/dashboard/', {\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]')?.value || ''\r\n                }\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to fetch dashboard data');\r\n\r\n            const data = await response.json();\r\n            setDashboardData(data);\r\n            setLoading(false);\r\n        } catch (err) {\r\n            setError(err.message);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"w-16 h-16 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n                    <p className=\"text-slate-300 text-lg\">טוען נתוני דשבורד...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center\">\r\n                <div className=\"bg-red-900/20 border border-red-500/30 rounded-2xl p-8 max-w-md mx-auto\">\r\n                    <div className=\"text-center\">\r\n                        <i className=\"fas fa-exclamation-triangle text-red-400 text-4xl mb-4\"></i>\r\n                        <h2 className=\"text-xl font-bold text-white mb-2\">שגיאה בטעינת הנתונים</h2>\r\n                        <p className=\"text-red-200 mb-4\">{error}</p>\r\n                        <button\r\n                            onClick={fetchDashboardData}\r\n                            className=\"bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg border border-red-400/40 transition-all duration-200\"\r\n                        >\r\n                            נסה שוב\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n            <DashboardHeader />\r\n            <DashboardSections data={dashboardData} />\r\n            <EmptyState data={dashboardData} />\r\n            <BackToHome />\r\n            <FloatingActionButton />\r\n        </div>\r\n    );\r\n};\r\n\r\n// Dashboard Header Component\r\nconst DashboardHeader = () => {\r\n    return (\r\n        <div className=\"text-center mb-8\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center md:justify-between\">\r\n                <div className=\"mb-4 md:mb-0\">\r\n                    <h1 className=\"text-4xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-cyan-500 bg-clip-text text-transparent mb-2\">\r\n                        🎯 דשבורד מנהל\r\n                    </h1>\r\n                    <p className=\"text-slate-300\">ניהול תיקונים וזרימת עבודה - מבט כולל על כל הפעילות</p>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 justify-center md:justify-end flex-wrap\">\r\n                    <ActionButton\r\n                        href=\"/repair/new/\"\r\n                        icon=\"fas fa-plus\"\r\n                        text=\"תיקון חדש\"\r\n                        gradient=\"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700\"\r\n                        title=\"צור תיקון חדש\"\r\n                    />\r\n                    <ActionButton\r\n                        href=\"/backup/menu/\"\r\n                        icon=\"fas fa-download\"\r\n                        text=\"גיבוי\"\r\n                        gradient=\"from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600\"\r\n                        title=\"גיבוי נתונים\"\r\n                    />\r\n                    <ActionButton\r\n                        href=\"/print-labels/menu/\"\r\n                        icon=\"fas fa-print\"\r\n                        text=\"מדבקות\"\r\n                        gradient=\"from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800\"\r\n                        title=\"הדפסת מדבקות\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Action Button Component\r\nconst ActionButton = ({ href, icon, text, gradient, title }) => {\r\n    return (\r\n        <a\r\n            href={href}\r\n            className={`bg-gradient-to-r ${gradient} text-white font-semibold px-4 py-2 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 inline-flex items-center gap-2`}\r\n            title={title}\r\n        >\r\n            <i className={icon}></i>\r\n            {text}\r\n        </a>\r\n    );\r\n};\r\n\r\n// Dashboard Sections Component\r\nconst DashboardSections = ({ data }) => {\r\n    const sections = [\r\n        {\r\n            key: 'stuck_repairs',\r\n            title: 'תיקונים תקועים - דרושה עזרה מיידית',\r\n            subtitle: 'פעולה דרושה עכשיו',\r\n            icon: 'fas fa-exclamation-triangle',\r\n            color: 'red',\r\n            bgColor: 'bg-red-900/20',\r\n            borderColor: 'border-red-500/30',\r\n            headerBg: 'bg-red-500/20',\r\n            headerBorder: 'border-red-500/30',\r\n            iconBg: 'bg-red-500/30',\r\n            iconColor: 'text-red-400',\r\n            buttonBg: 'bg-red-500/30',\r\n            buttonText: 'text-red-200',\r\n            buttonBorder: 'border-red-500/40',\r\n            buttonHover: 'hover:bg-red-500/40',\r\n            animate: 'animate-pulse',\r\n            priority: true,\r\n            countSuffix: 'מכונאי מחכה'\r\n        },\r\n        {\r\n            key: 'pending_diagnosis',\r\n            title: 'ממתינים לאבחון',\r\n            subtitle: 'תיקונים שדורשים אבחון ראשוני',\r\n            icon: 'fas fa-search',\r\n            color: 'orange',\r\n            bgColor: 'bg-slate-800/50',\r\n            borderColor: 'border-slate-700',\r\n            headerBg: 'bg-orange-500/20',\r\n            headerBorder: 'border-orange-500/30',\r\n            iconBg: 'bg-orange-500/20',\r\n            iconColor: 'text-orange-400',\r\n            buttonBg: 'bg-orange-500/30',\r\n            buttonText: 'text-orange-200',\r\n            buttonBorder: 'border-orange-500/40',\r\n            buttonHover: 'hover:bg-orange-500/40',\r\n            countSuffix: 'ממתינים'\r\n        },\r\n        {\r\n            key: 'pending_approval',\r\n            title: 'ממתינים לאישור הלקוח',\r\n            subtitle: 'הצעות מחיר שממתינות לאישור',\r\n            icon: 'fas fa-clipboard-check',\r\n            color: 'blue',\r\n            bgColor: 'bg-slate-800/50',\r\n            borderColor: 'border-slate-700',\r\n            headerBg: 'bg-blue-500/20',\r\n            headerBorder: 'border-blue-500/30',\r\n            iconBg: 'bg-blue-500/30',\r\n            iconColor: 'text-blue-400',\r\n            buttonBg: 'bg-blue-500/30',\r\n            buttonText: 'text-blue-200',\r\n            buttonBorder: 'border-blue-500/40',\r\n            buttonHover: 'hover:bg-blue-500/40',\r\n            countSuffix: 'ממתינים'\r\n        },\r\n        {\r\n            key: 'approved_waiting_for_mechanic',\r\n            title: 'מאושרים - ממתינים להקצאת מכונאי',\r\n            subtitle: 'תיקונים מאושרים שצריכים הקצאת מכונאי',\r\n            icon: 'fas fa-user-plus',\r\n            color: 'purple',\r\n            bgColor: 'bg-slate-800/50',\r\n            borderColor: 'border-slate-700',\r\n            headerBg: 'bg-purple-500/20',\r\n            headerBorder: 'border-purple-500/30',\r\n            iconBg: 'bg-purple-500/30',\r\n            iconColor: 'text-purple-400',\r\n            buttonBg: 'bg-purple-500/30',\r\n            buttonText: 'text-purple-200',\r\n            buttonBorder: 'border-purple-500/40',\r\n            buttonHover: 'hover:bg-purple-500/40',\r\n            countSuffix: 'ממתינים'\r\n        },\r\n        {\r\n            key: 'in_progress',\r\n            title: 'בעבודה',\r\n            subtitle: 'תיקונים פעילים כרגע',\r\n            icon: 'fas fa-cogs',\r\n            color: 'green',\r\n            bgColor: 'bg-slate-800/50',\r\n            borderColor: 'border-slate-700',\r\n            headerBg: 'bg-green-500/20',\r\n            headerBorder: 'border-green-500/30',\r\n            iconBg: 'bg-green-500/30',\r\n            iconColor: 'text-green-400',\r\n            buttonBg: 'bg-green-500/30',\r\n            buttonText: 'text-green-200',\r\n            buttonBorder: 'border-green-500/40',\r\n            buttonHover: 'hover:bg-green-500/40',\r\n            countSuffix: 'פעילים'\r\n        },\r\n        {\r\n            key: 'awaiting_quality_check',\r\n            title: 'ממתינים לבדיקת איכות',\r\n            subtitle: 'תיקונים שהושלמו וממתינים לאישור איכות',\r\n            icon: 'fas fa-search-plus',\r\n            color: 'yellow',\r\n            bgColor: 'bg-slate-800/50',\r\n            borderColor: 'border-slate-700',\r\n            headerBg: 'bg-yellow-500/20',\r\n            headerBorder: 'border-yellow-500/30',\r\n            iconBg: 'bg-yellow-500/30',\r\n            iconColor: 'text-yellow-400',\r\n            buttonBg: 'bg-yellow-500/30',\r\n            buttonText: 'text-yellow-200',\r\n            buttonBorder: 'border-yellow-500/40',\r\n            buttonHover: 'hover:bg-yellow-500/40',\r\n            countSuffix: 'לבדיקה'\r\n        },\r\n        {\r\n            key: 'repairs_not_collected',\r\n            title: 'מוכנים לאיסוף',\r\n            subtitle: 'אופניים שהושלמו וממתינים לאיסוף',\r\n            icon: 'fas fa-check-circle',\r\n            color: 'cyan',\r\n            bgColor: 'bg-slate-800/50',\r\n            borderColor: 'border-slate-700',\r\n            headerBg: 'bg-cyan-500/20',\r\n            headerBorder: 'border-cyan-500/30',\r\n            iconBg: 'bg-cyan-500/30',\r\n            iconColor: 'text-cyan-400',\r\n            buttonBg: 'bg-cyan-500/30',\r\n            buttonText: 'text-cyan-200',\r\n            buttonBorder: 'border-cyan-500/40',\r\n            buttonHover: 'hover:bg-cyan-500/40',\r\n            countSuffix: 'מוכנים'\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {sections.map(section => {\r\n                const repairs = data[section.key] || [];\r\n                if (repairs.length === 0) return null;\r\n\r\n                return (\r\n                    <DashboardSection\r\n                        key={section.key}\r\n                        section={section}\r\n                        repairs={repairs}\r\n                    />\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Dashboard Section Component\r\nconst DashboardSection = ({ section, repairs }) => {\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n    const toggleSection = () => {\r\n        setIsExpanded(!isExpanded);\r\n    };\r\n\r\n    return (\r\n        <div className={`${section.bgColor} backdrop-blur-sm border ${section.borderColor} rounded-2xl overflow-hidden ${section.animate || ''}`}>\r\n            {/* Section Header */}\r\n            <div className={`${section.headerBg} px-6 py-4 border-b ${section.headerBorder}`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className={`w-12 h-12 ${section.iconBg} rounded-xl flex items-center justify-center`}>\r\n                            <i className={`${section.icon} ${section.iconColor} text-xl ${section.animate || ''}`}></i>\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold text-white\">{section.title}</h2>\r\n                            <p className={`${section.buttonText} text-sm`}>{section.subtitle}</p>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        className={`flex items-center justify-between w-48 md:w-56 px-4 py-3 ${section.buttonBg} ${section.buttonText} rounded-lg border ${section.buttonBorder} ${section.buttonHover} transition-all duration-300 cursor-pointer ${section.animate || ''}`}\r\n                        onClick={toggleSection}\r\n                    >\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <i className={section.icon}></i>\r\n                            <span className=\"text-sm md:text-base\">\r\n                                {repairs.length} {section.countSuffix}\r\n                            </span>\r\n                        </div>\r\n                        <i className={`fas fa-chevron-down transition-transform duration-300 text-sm ${isExpanded ? 'rotate-180' : ''}`}></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Section Content */}\r\n            <div className={`transition-all duration-500 ease-in-out overflow-hidden ${isExpanded ? 'max-h-screen opacity-100' : 'max-h-0 opacity-0'}`}>\r\n                <div className=\"p-6\">\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n                        {repairs.map(repair => (\r\n                            <RepairCard\r\n                                key={repair.id}\r\n                                repair={repair}\r\n                                section={section}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Mark as picked up function\r\nconst markAsPickedUp = (repairId) => {\r\n    if (!confirm('האם לסמן את האופניים כנאספו על ידי הלקוח?')) {\r\n        return;\r\n    }\r\n\r\n    const button = document.querySelector(`button[onclick*=\"markAsPickedUp(${repairId})\"]`);\r\n    if (button) {\r\n        button.disabled = true;\r\n        button.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i>';\r\n    }\r\n\r\n    fetch(`/manager/mark-delivered/${repairId}/`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]')?.value || '',\r\n            'Content-Type': 'application/json',\r\n        },\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        if (data.success) {\r\n            const card = button.closest('.bg-slate-800\\\\/60');\r\n            if (card) {\r\n                card.style.transition = 'all 0.5s ease-out';\r\n                card.style.opacity = '0';\r\n                card.style.transform = 'scale(0.9)';\r\n                setTimeout(() => {\r\n                    card.remove();\r\n                }, 500);\r\n            }\r\n            alert('האופניים סומנו כנאספו בהצלחה!');\r\n        } else {\r\n            alert('שגיאה בעדכון הסטטוס: ' + (data.error || 'שגיאה לא ידועה'));\r\n            if (button) {\r\n                button.disabled = false;\r\n                button.innerHTML = '<i class=\"fas fa-check\"></i>';\r\n            }\r\n        }\r\n    })\r\n    .catch(error => {\r\n        console.error('Error:', error);\r\n        alert('שגיאה בעדכון הסטטוס. נסה שוב.');\r\n        if (button) {\r\n            button.disabled = false;\r\n            button.innerHTML = '<i class=\"fas fa-check\"></i>';\r\n        }\r\n    });\r\n};\r\n\r\n// Repair Card Component\r\nconst RepairCard = ({ repair, section }) => {\r\n    const getCardActions = () => {\r\n        switch (section.key) {\r\n            case 'stuck_repairs':\r\n                return (\r\n                    <div className=\"flex items-center justify-between gap-3\">\r\n                        <a href={`/repair/status/${repair.id}/`}\r\n                           className=\"flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-600/50 text-slate-300 hover:text-white rounded-lg border border-slate-600 hover:border-slate-500 transition-all duration-200\">\r\n                            <i className=\"fas fa-eye\"></i>\r\n                            <span className=\"text-sm\">צפה</span>\r\n                        </a>\r\n                        <a href={`/manager/repair/${repair.id}/`}\r\n                           className={`flex items-center gap-2 px-4 py-2 bg-${section.color}-500/20 hover:bg-${section.color}-500/30 text-${section.color}-300 hover:text-${section.color}-200 rounded-lg border border-${section.color}-400/40 hover:border-${section.color}-400/60 transition-all duration-200`}>\r\n                            <i className=\"fas fa-reply\"></i>\r\n                            <span className=\"text-sm\">הגב</span>\r\n                        </a>\r\n                    </div>\r\n                );\r\n\r\n            case 'pending_diagnosis':\r\n                return (\r\n                    <a href={`/manager/repair/${repair.id}/diagnosis/`}\r\n                       className={`flex items-center gap-2 px-6 py-2 bg-${section.color}-500/20 hover:bg-${section.color}-500/30 text-${section.color}-300 hover:text-${section.color}-200 rounded-lg border border-${section.color}-400/40 hover:border-${section.color}-400/60 transition-all duration-200 w-full justify-center`}>\r\n                        <i className=\"fas fa-stethoscope\"></i>\r\n                        <span className=\"text-sm font-medium\">אבחן עכשיו</span>\r\n                    </a>\r\n                );\r\n\r\n            case 'pending_approval':\r\n                return (\r\n                    <a href={`/customer/approval/${repair.id}/`}\r\n                       className={`flex items-center gap-2 px-6 py-2 bg-${section.color}-500/20 hover:bg-${section.color}-500/30 text-${section.color}-300 hover:text-${section.color}-200 rounded-lg border border-${section.color}-400/40 hover:border-${section.color}-400/60 transition-all duration-200 w-full justify-center`}>\r\n                        <i className=\"fas fa-check\"></i>\r\n                        <span className=\"text-sm font-medium\">נהל אישור</span>\r\n                    </a>\r\n                );\r\n\r\n            case 'approved_waiting_for_mechanic':\r\n                return (\r\n                    <a href={`/assign/mechanic/${repair.id}/`}\r\n                       className={`flex items-center gap-2 px-6 py-2 bg-${section.color}-500/20 hover:bg-${section.color}-500/30 text-${section.color}-300 hover:text-${section.color}-200 rounded-lg border border-${section.color}-400/40 hover:border-${section.color}-400/60 transition-all duration-200 w-full justify-center`}>\r\n                        <i className=\"fas fa-user-plus\"></i>\r\n                        <span className=\"text-sm font-medium\">הקצה מכונאי</span>\r\n                    </a>\r\n                );\r\n\r\n            case 'in_progress':\r\n                return (\r\n                    <a href={`/repair/status/${repair.id}/`}\r\n                       className={`flex items-center gap-2 px-6 py-2 bg-${section.color}-500/20 hover:bg-${section.color}-500/30 text-${section.color}-300 hover:text-${section.color}-200 rounded-lg border border-${section.color}-400/40 hover:border-${section.color}-400/60 transition-all duration-200 w-full justify-center`}>\r\n                        <i className=\"fas fa-eye\"></i>\r\n                        <span className=\"text-sm font-medium\">צפה בפרטים</span>\r\n                    </a>\r\n                );\r\n\r\n            case 'awaiting_quality_check':\r\n                return (\r\n                    <a href={`/manager/quality-check/${repair.id}/`}\r\n                       className={`flex items-center gap-2 px-6 py-2 bg-${section.color}-500/20 hover:bg-${section.color}-500/30 text-${section.color}-300 hover:text-${section.color}-200 rounded-lg border border-${section.color}-400/40 hover:border-${section.color}-400/60 transition-all duration-200 w-full justify-center`}>\r\n                        <i className=\"fas fa-check-double\"></i>\r\n                        <span className=\"text-sm font-medium\">בדוק איכות</span>\r\n                    </a>\r\n                );\r\n\r\n            case 'repairs_not_collected':\r\n                return (\r\n                    <div className=\"flex items-center justify-between gap-2\">\r\n                        <a href={`/repair/status/${repair.id}/`}\r\n                           className=\"flex items-center gap-1 px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 text-slate-300 hover:text-white rounded-lg border border-slate-600 hover:border-slate-500 transition-all duration-200 text-xs\">\r\n                            <i className=\"fas fa-eye\"></i>\r\n                            <span>צפה</span>\r\n                        </a>\r\n                        <a href={`tel:${repair.bike?.customer?.phone || ''}`}\r\n                           className={`flex items-center gap-1 px-3 py-2 bg-${section.color}-500/20 hover:bg-${section.color}-500/30 text-${section.color}-300 hover:text-${section.color}-200 rounded-lg border border-${section.color}-400/40 hover:border-${section.color}-400/60 transition-all duration-200 text-xs`}>\r\n                            <i className=\"fas fa-phone\"></i>\r\n                            <span>התקשר</span>\r\n                        </a>\r\n                        <button\r\n                            onClick={() => markAsPickedUp(repair.id)}\r\n                            className=\"flex items-center gap-1 px-3 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-300 hover:text-green-200 rounded-lg border border-green-400/40 hover:border-green-400/60 transition-all duration-200 text-xs\">\r\n                            <i className=\"fas fa-check\"></i>\r\n                            <span>נאסף</span>\r\n                        </button>\r\n                    </div>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    const getBadgeContent = () => {\r\n        switch (section.key) {\r\n            case 'stuck_repairs':\r\n                return { text: 'דרושה עזרה', color: 'bg-red-500/30 border-red-400/40 text-red-200', animate: 'animate-pulse' };\r\n            case 'pending_approval':\r\n                return { text: `₪${repair.get_total_price || '0'}`, color: 'bg-green-500/30 border-green-400/40 text-green-200' };\r\n            case 'approved_waiting_for_mechanic':\r\n                return { text: `₪${repair.get_total_approved_price || '0'}`, color: 'bg-green-500/30 border-green-400/40 text-green-200' };\r\n            case 'in_progress':\r\n                return { text: `${repair.progress_percentage || 0}%`, color: 'bg-green-500/30 border-green-400/40 text-green-200' };\r\n            case 'awaiting_quality_check':\r\n                return { text: 'בדיקת איכות', color: `bg-${section.color}-500/30 border-${section.color}-400/40 text-${section.color}-200` };\r\n            case 'repairs_not_collected':\r\n                return { text: 'מוכן לאיסוף', color: `bg-${section.color}-500/30 border-${section.color}-400/40 text-${section.color}-200` };\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    const badge = getBadgeContent();\r\n\r\n    return (\r\n        <div className={`bg-slate-800/60 backdrop-blur-sm border border-${section.color}-400/40 rounded-xl overflow-hidden hover:border-${section.color}-400/60 transition-all duration-300 hover:shadow-lg hover:shadow-${section.color}-500/20`}>\r\n            {/* Card Header */}\r\n            <div className={`bg-${section.color}-500/10 border-b border-${section.color}-400/30 p-4`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className={`w-10 h-10 bg-${section.color}-500/20 rounded-lg flex items-center justify-center`}>\r\n                            <i className={`${section.icon} ${section.iconColor} ${section.key === 'in_progress' ? 'animate-spin' : ''} ${section.key === 'stuck_repairs' ? 'animate-pulse' : ''}`}></i>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-lg font-bold text-white\">#{repair.id}</h3>\r\n                            <p className={`${section.buttonText} text-sm`}>\r\n                                {repair.bike?.brand} {repair.bike?.model}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    {badge && (\r\n                        <div className={`px-3 py-1 rounded-full border ${badge.color} ${badge.animate || ''}`}>\r\n                            <span className=\"text-xs font-bold\">{badge.text}</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Card Body */}\r\n            <div className=\"p-4 space-y-3\">\r\n                <div className=\"flex items-center gap-3 text-sm\">\r\n                    <i className=\"fas fa-user text-slate-400 w-4\"></i>\r\n                    <span className=\"text-white\">{repair.bike?.customer?.name || 'ללא שם'}</span>\r\n                </div>\r\n\r\n                {repair.assigned_mechanic && (\r\n                    <div className=\"flex items-center gap-3 text-sm\">\r\n                        <i className=\"fas fa-wrench text-slate-400 w-4\"></i>\r\n                        <span className=\"text-white\">\r\n                            {repair.assigned_mechanic.get_full_name || repair.assigned_mechanic.username}\r\n                        </span>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"flex items-center gap-3 text-sm\">\r\n                    <i className={`fas fa-clock ${section.iconColor} w-4`}></i>\r\n                    <span className={section.buttonText}>\r\n                        {section.key === 'stuck_repairs' ? `תקוע ${repair.created_at_display || ''}` :\r\n                         section.key === 'pending_diagnosis' ? 'ממתין לאבחון' :\r\n                         section.key === 'pending_approval' ? 'ממתין לאישור הלקוח' :\r\n                         section.key === 'approved_waiting_for_mechanic' ? 'ממתין להקצאת מכונאי' :\r\n                         section.key === 'in_progress' ? 'בעבודה כרגע' :\r\n                         section.key === 'awaiting_quality_check' ? 'ממתין לבדיקת איכות' :\r\n                         section.key === 'repairs_not_collected' ? `הושלם ${repair.completed_at_display || ''}` :\r\n                         'סטטוס לא ידוע'}\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Special content for stuck repairs */}\r\n                {section.key === 'stuck_repairs' && repair.stuck_reason && (\r\n                    <div className=\"bg-red-500/10 border border-red-400/30 rounded-lg p-3 mt-3\">\r\n                        <div className=\"flex items-start gap-2\">\r\n                            <i className=\"fas fa-exclamation-circle text-red-400 mt-0.5\"></i>\r\n                            <span className=\"text-red-200 text-sm\">{repair.stuck_reason}</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Additional info for ready for collection */}\r\n                {section.key === 'repairs_not_collected' && (\r\n                    <div className=\"flex items-center gap-3 text-sm\">\r\n                        <i className=\"fas fa-shekel-sign text-green-400 w-4\"></i>\r\n                        <span className=\"text-green-300\">₪{repair.get_total_approved_price || '0'}</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Card Footer */}\r\n            <div className={`border-t border-${section.color}-400/30 bg-${section.color}-500/5 p-4`}>\r\n                <div className=\"flex items-center justify-center\">\r\n                    {getCardActions()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Empty State Component\r\nconst EmptyState = ({ data }) => {\r\n    const hasAnyData = Object.values(data).some(arr => arr && arr.length > 0);\r\n\r\n    if (hasAnyData) return null;\r\n\r\n    return (\r\n        <div className=\"text-center py-20\">\r\n            <div className=\"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-12 max-w-2xl mx-auto\">\r\n                <div className=\"w-24 h-24 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                    <i className=\"fas fa-clipboard-check text-green-400 text-4xl\"></i>\r\n                </div>\r\n                <h2 className=\"text-2xl font-bold text-white mb-4\">כל התיקונים במצב תקין</h2>\r\n                <p className=\"text-slate-400 mb-8\">אין תיקונים הדורשים טיפול מיוחד כרגע</p>\r\n                <a href=\"/\" className=\"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold px-8 py-4 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 inline-flex items-center gap-2\">\r\n                    <i className=\"fas fa-home\"></i>חזרה לדף הבית\r\n                </a>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Back to Home Component\r\nconst BackToHome = () => {\r\n    return (\r\n        <div className=\"text-center mt-8\">\r\n            <a href=\"/\" className=\"bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-semibold px-6 py-3 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 inline-flex items-center gap-2\">\r\n                <i className=\"fas fa-home\"></i>חזרה לדף הבית\r\n            </a>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Floating Action Button Component\r\nconst FloatingActionButton = () => {\r\n    return (\r\n        <div className=\"fixed bottom-6 left-6 z-40\">\r\n            <a href=\"/repair/new/\"\r\n               className=\"group flex items-center gap-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-blue-400/20\"\r\n               title=\"צור תיקון חדש\">\r\n                <i className=\"fas fa-plus text-lg\"></i>\r\n                <span className=\"hidden group-hover:inline-block transition-all duration-300 text-sm font-medium\">תיקון חדש</span>\r\n            </a>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManagerDashboard;\r\n\r\n// Initialize and render the app\r\nimport { createRoot } from 'react-dom/client';\r\n\r\nconst rootElement = document.getElementById('root');\r\nif (rootElement) {\r\n    const root = createRoot(rootElement);\r\n    root.render(<ManagerDashboard />);\r\n}\r\n"],"names":["ManagerDashboard","dashboardData","setDashboardData","useState","loading","setLoading","error","setError","useEffect","fetchDashboardData","interval","response","data","err","jsxs","jsx","DashboardHeader","DashboardSections","EmptyState","BackToHome","FloatingActionButton","ActionButton","href","icon","text","gradient","title","sections","section","repairs","DashboardSection","isExpanded","setIsExpanded","toggleSection","repair","RepairCard","markAsPickedUp","repairId","button","card","getCardActions","badge","arr","rootElement","createRoot"],"mappings":"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"}