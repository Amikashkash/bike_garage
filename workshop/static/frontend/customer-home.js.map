{"version":3,"file":"customer-home.js","sources":["../../../frontend/src/components/CustomerHome.jsx","../../../frontend/src/customer-home.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useWebSocket } from '../hooks/useWebSocket'\r\n\r\nexport default function CustomerHome() {\r\n  const [stats, setStats] = useState({\r\n    active_repairs: 0,\r\n    total_repairs: 0,\r\n    notifications: 0,\r\n    ready_for_pickup: 0\r\n  })\r\n  \r\n  const { isConnected, messages } = useWebSocket(null, 'customer')\r\n\r\n  useEffect(() => {\r\n    // Fetch initial stats\r\n    fetch('/api/customer/stats/', { credentials: 'include' })\r\n      .then(res => res.json())\r\n      .then(data => setStats(data))\r\n      .catch(err => console.error('Error fetching stats:', err))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    // Handle real-time messages\r\n    messages.forEach(message => {\r\n      if (message.type === 'repair_status_update') {\r\n        // Refresh stats when repairs update\r\n        fetch('/api/customer/stats/', { credentials: 'include' })\r\n          .then(res => res.json())\r\n          .then(data => setStats(data))\r\n      }\r\n    })\r\n  }, [messages])\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900\">\r\n      {/* Header */}\r\n      <div className=\"bg-slate-800/30 backdrop-blur-md border-b border-slate-700\">\r\n        <div className=\"container mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center\">\r\n                <i className=\"fas fa-bicycle text-blue-400\"></i>\r\n              </div>\r\n              <h1 className=\"text-xl font-bold text-white\">驻 拽专</h1>\r\n            </div>\r\n            \r\n            {/* Connection Status */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-400' : 'bg-red-400'}`}></div>\r\n              <span className=\"text-sm text-slate-400\">\r\n                {isConnected ? '专' : '转拽'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"container mx-auto px-4 py-6\">\r\n        {/* Welcome Section */}\r\n        <div className=\"mb-6\">\r\n          <h2 className=\"text-2xl md:text-3xl font-bold text-white mb-1\">砖! </h2>\r\n          <p className=\"text-slate-400\"> 转专爪 注砖转 ?</p>\r\n        </div>\r\n\r\n        {/* Priority Alert - Ready for Pickup */}\r\n        {stats.ready_for_pickup > 0 && (\r\n          <div className=\"mb-6\">\r\n            <div className=\"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-xl p-4 backdrop-blur-sm\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center\">\r\n                  <i className=\"fas fa-check-circle text-green-400\"></i>\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"text-green-300 font-semibold\">\r\n                    {stats.ready_for_pickup} 驻  住祝! \r\n                  </h3>\r\n                  <p className=\"text-green-200/80 text-sm\">转 住祝 住</p>\r\n                </div>\r\n                <a \r\n                  href=\"/customer/dashboard/\"\r\n                  className=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\r\n                >\r\n                  爪驻 驻专\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Quick Stats - Mobile First */}\r\n        <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n          <StatCard\r\n            icon=\"fas fa-tools\"\r\n            title=\"转拽 驻注\"\r\n            value={stats.active_repairs}\r\n            color=\"blue\"\r\n            compact={true}\r\n          />\r\n          <StatCard\r\n            icon=\"fas fa-bell\"\r\n            title=\"转专转\"\r\n            value={stats.notifications}\r\n            color=\"red\"\r\n            compact={true}\r\n          />\r\n          <StatCard\r\n            icon=\"fas fa-check-circle\"\r\n            title=\" 住祝\"\r\n            value={stats.ready_for_pickup}\r\n            color=\"green\"\r\n            compact={true}\r\n          />\r\n          <StatCard\r\n            icon=\"fas fa-history\" \r\n            title=\"住状 转拽\"\r\n            value={stats.total_repairs}\r\n            color=\"purple\"\r\n            compact={true}\r\n          />\r\n        </div>\r\n\r\n        {/* Main Action Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n          <ActionCard\r\n            icon=\"fas fa-plus-circle\"\r\n            title=\" 转拽 砖\"\r\n            description=\" 注 转拽 驻 砖\"\r\n            href=\"/customer/report/\"\r\n            color=\"bg-gradient-to-br from-red-500 to-red-600\"\r\n          />\r\n          \r\n          <ActionCard\r\n            icon=\"fas fa-tachometer-alt\"\r\n            title=\" 砖 砖\"\r\n            description=\"爪驻  转拽 转专转\"\r\n            href=\"/customer/dashboard/\"\r\n            color=\"bg-gradient-to-br from-blue-500 to-blue-600\"\r\n          />\r\n        </div>\r\n\r\n        {/* Secondary Actions */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <SecondaryActionCard\r\n            icon=\"fas fa-bicycle\"\r\n            title=\"驻 砖\"\r\n            href=\"/my-bikes/\"\r\n          />\r\n          <SecondaryActionCard\r\n            icon=\"fas fa-plus\"\r\n            title=\"住祝 驻\"\r\n            href=\"/my-bikes/add/\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction StatCard({ icon, title, value, color, compact = false, className, style }) {\r\n  const colorClasses = {\r\n    blue: 'from-blue-500/20 to-blue-600/20 border-blue-500/30',\r\n    purple: 'from-purple-500/20 to-purple-600/20 border-purple-500/30',\r\n    green: 'from-green-500/20 to-green-600/20 border-green-500/30',\r\n    red: 'from-red-500/20 to-red-600/20 border-red-500/30'\r\n  }\r\n\r\n  const iconColorClasses = {\r\n    blue: 'text-blue-400',\r\n    purple: 'text-purple-400', \r\n    green: 'text-green-400',\r\n    red: 'text-red-400'\r\n  }\r\n\r\n  if (compact) {\r\n    return (\r\n      <div className={`bg-gradient-to-br ${colorClasses[color]} backdrop-blur-sm border rounded-xl p-4 ${className || ''}`} style={style}>\r\n        <div className=\"text-center\">\r\n          <div className={`w-8 h-8 bg-gradient-to-br ${colorClasses[color]} rounded-lg flex items-center justify-center mx-auto mb-2`}>\r\n            <i className={`${icon} ${iconColorClasses[color]} text-sm`}></i>\r\n          </div>\r\n          <p className={`text-2xl font-bold ${iconColorClasses[color]} mb-1`}>{value}</p>\r\n          <p className=\"text-slate-300 text-xs\">{title}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={`bg-gradient-to-br ${colorClasses[color]} backdrop-blur-sm border rounded-xl p-6 ${className || ''}`} style={style}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-slate-300 text-sm mb-1\">{title}</p>\r\n          <p className={`text-3xl font-bold ${iconColorClasses[color]}`}>{value}</p>\r\n        </div>\r\n        <div className={`w-12 h-12 bg-gradient-to-br ${colorClasses[color]} rounded-xl flex items-center justify-center`}>\r\n          <i className={`${icon} ${iconColorClasses[color]} text-xl`}></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction ActionCard({ icon, title, description, href, color, className, style }) {\r\n  return (\r\n    <a \r\n      href={href}\r\n      className={`block ${color} hover:scale-105 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 ${className || ''}`}\r\n      style={style}\r\n    >\r\n      <div className=\"flex items-start gap-4\">\r\n        <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n          <i className={`${icon} text-white text-xl`}></i>\r\n        </div>\r\n        <div>\r\n          <h4 className=\"text-xl font-bold text-white mb-2\">{title}</h4>\r\n          <p className=\"text-white/80\">{description}</p>\r\n        </div>\r\n      </div>\r\n    </a>\r\n  )\r\n}\r\n\r\nfunction SecondaryActionCard({ icon, title, href }) {\r\n  const handleClick = (e) => {\r\n    console.log('SecondaryActionCard clicked:', { title, href })\r\n    // Let the default link behavior happen\r\n  }\r\n  \r\n  return (\r\n    <a \r\n      href={href}\r\n      onClick={handleClick}\r\n      className=\"block bg-slate-800/50 hover:bg-slate-800/70 border border-slate-700 hover:border-slate-600 rounded-xl p-4 transition-all duration-200 hover:scale-105 cursor-pointer\"\r\n      style={{ display: 'block', textDecoration: 'none' }}\r\n    >\r\n      <div className=\"text-center\">\r\n        <div className=\"w-10 h-10 bg-slate-700/50 rounded-lg flex items-center justify-center mx-auto mb-3\">\r\n          <i className={`${icon} text-slate-300 text-lg`}></i>\r\n        </div>\r\n        <p className=\"text-white font-medium text-sm\">{title}</p>\r\n      </div>\r\n    </a>\r\n  )\r\n}","import React from 'react'\r\nimport { createRoot } from 'react-dom/client'\r\nimport CustomerHome from './components/CustomerHome'\r\nimport './main.css'\r\n\r\n// Initialize React app\r\nconst container = document.getElementById('customer-home-root')\r\nif (container) {\r\n  const root = createRoot(container)\r\n  root.render(<CustomerHome />)\r\n}"],"names":["CustomerHome","stats","setStats","useState","isConnected","messages","useWebSocket","useEffect","res","data","err","message","jsxs","jsx","StatCard","ActionCard","SecondaryActionCard","icon","title","value","color","compact","className","style","colorClasses","iconColorClasses","description","href","handleClick","e","container","createRoot"],"mappings":"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"}