{"version":3,"file":"repair-diagnosis.js","sources":["../../../frontend/src/components/diagnosis/RepairInfo.jsx","../../../frontend/src/components/diagnosis/ExistingItems.jsx","../../../frontend/src/components/diagnosis/RepairItemRow.jsx","../../../frontend/src/components/diagnosis/NotificationSettings.jsx","../../../frontend/src/pages/manager/RepairDiagnosis.jsx"],"sourcesContent":["/**\r\n * RepairInfo Component\r\n *\r\n * Displays repair information sidebar including:\r\n * - Bike and customer details\r\n * - Subcategories\r\n * - Problem description\r\n */\r\n\r\nconst RepairInfo = ({ repair, onCategoryClick }) => {\r\n  return (\r\n    <div className=\"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl overflow-hidden h-fit\">\r\n      {/* Header */}\r\n      <div className=\"bg-blue-500/20 px-4 py-3 border-b border-blue-500/30\">\r\n        <h3 className=\"text-lg font-bold text-white flex items-center gap-2\">\r\n          <i className=\"fas fa-info-circle text-blue-400\"></i>פרטי התיקון\r\n        </h3>\r\n      </div>\r\n\r\n      <div className=\"p-4 space-y-3\">\r\n        {/* Bike & Customer Info */}\r\n        <div className=\"flex items-center gap-3 p-3 bg-slate-700/50 border border-slate-600 rounded-lg\">\r\n          <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\r\n            <i className=\"fas fa-bicycle text-white\"></i>\r\n          </div>\r\n          <div className=\"flex-1 min-w-0\">\r\n            <h4 className=\"font-bold text-white text-base truncate\">\r\n              {repair.bike.brand} {repair.bike.model}\r\n            </h4>\r\n            <p className=\"text-slate-300 text-sm truncate\">{repair.customer.name}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contact Info */}\r\n        <div className=\"space-y-2 text-sm\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-slate-300\">טלפון:</span>\r\n            <span className=\"text-white font-medium\">{repair.customer.phone || 'לא צוין'}</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-slate-300\">תאריך:</span>\r\n            <span className=\"text-white font-medium\">{repair.created_at}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Subcategories */}\r\n        {repair.subcategories && repair.subcategories.length > 0 && (\r\n          <div>\r\n            <h6 className=\"text-white font-medium mb-2 flex items-center gap-2 text-sm\">\r\n              <i className=\"fas fa-tags text-yellow-400\"></i>קטגוריות התקלה\r\n            </h6>\r\n            <div className=\"space-y-1\">\r\n              {repair.subcategories.map(subcategory => (\r\n                <div\r\n                  key={subcategory.id}\r\n                  onClick={() => onCategoryClick(subcategory.name)}\r\n                  className=\"bg-yellow-500/10 border border-yellow-400/30 rounded-lg p-2 cursor-pointer transition-all hover:bg-yellow-500/20\"\r\n                  title=\"לחץ להוספה לתיאור הפעולה\"\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2 min-w-0 flex-1\">\r\n                      <i className=\"fas fa-tag text-yellow-400 text-xs flex-shrink-0\"></i>\r\n                      <span className=\"text-yellow-100 font-medium text-sm truncate\">\r\n                        {subcategory.name}\r\n                      </span>\r\n                    </div>\r\n                    <i className=\"fas fa-plus-circle text-yellow-400 text-xs flex-shrink-0\"></i>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Problem Description */}\r\n        {repair.problem_description && (\r\n          <div>\r\n            <h6 className=\"text-white font-medium mb-2 flex items-center gap-2 text-sm\">\r\n              <i className=\"fas fa-exclamation-triangle text-red-400\"></i>תיאור התקלה\r\n            </h6>\r\n            <div className=\"bg-red-500/10 border border-red-400/30 rounded-lg p-3\">\r\n              <p className=\"text-red-100 text-sm\">{repair.problem_description}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RepairInfo;\r\n","/**\r\n * ExistingItems Component\r\n *\r\n * Displays existing repair items (if any) with:\r\n * - Item description and price\r\n * - Approval status\r\n * - Total price calculation\r\n */\r\n\r\nconst ExistingItems = ({ items, totalPrice }) => {\r\n  if (!items || items.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"mb-4\">\r\n      {/* Header */}\r\n      <h6 className=\"text-white font-medium mb-3 flex items-center gap-2 text-sm\">\r\n        <i className=\"fas fa-list text-blue-400\"></i>פעולות תיקון קיימות\r\n      </h6>\r\n\r\n      {/* Items List */}\r\n      <div className=\"grid grid-cols-1 gap-3 mb-4\">\r\n        {items.map(item => (\r\n          <div key={item.id} className=\"bg-slate-700/50 border border-slate-600 rounded-lg p-3\">\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-2\">\r\n              {/* Item Description */}\r\n              <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n                <div className=\"w-6 h-6 bg-blue-500/20 rounded flex items-center justify-center flex-shrink-0\">\r\n                  <i className=\"fas fa-wrench text-blue-400 text-xs\"></i>\r\n                </div>\r\n                <span className=\"text-white font-medium text-sm break-words\">\r\n                  {item.description}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Price and Status */}\r\n              <div className=\"flex items-center justify-between sm:justify-end gap-2\">\r\n                <span className=\"text-white font-bold text-sm\">₪{item.price}</span>\r\n                {item.is_approved ? (\r\n                  <span className=\"bg-green-500/20 text-green-300 px-2 py-1 rounded text-xs font-medium whitespace-nowrap\">\r\n                    <i className=\"fas fa-check mr-1\"></i>אושר\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-medium whitespace-nowrap\">\r\n                    <i className=\"fas fa-clock mr-1\"></i>ממתין\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Total Price */}\r\n      <div className=\"bg-slate-700/30 border border-slate-600 rounded-lg p-3 mb-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <span className=\"text-slate-300 font-medium text-sm\">סה\"כ קיים:</span>\r\n          <span className=\"text-white font-bold text-lg\">₪{totalPrice.toFixed(2)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Divider */}\r\n      <div className=\"border-t border-slate-600 pt-4\">\r\n        <h6 className=\"text-white font-medium flex items-center gap-2 text-sm\">\r\n          <i className=\"fas fa-plus text-green-400\"></i>הוסף פעולות נוספות\r\n        </h6>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExistingItems;\r\n","/**\r\n * RepairItemRow Component\r\n *\r\n * Single row for adding a repair item with:\r\n * - Description input\r\n * - Price input\r\n * - Remove button\r\n */\r\n\r\nconst RepairItemRow = ({ index, item, onUpdate, onRemove, showRemove }) => {\r\n  return (\r\n    <div className=\"repair-item-row\">\r\n      <div className=\"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center\">\r\n        {/* Description Input */}\r\n        <div className=\"flex-1 min-w-0\">\r\n          <input\r\n            type=\"text\"\r\n            value={item.description}\r\n            onChange={e => onUpdate(index, 'description', e.target.value)}\r\n            className=\"w-full px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            placeholder=\"תיאור הפעולה (לדוגמה: החלפת בלמים קדמיים)\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        {/* Price Input and Remove Button */}\r\n        <div className=\"flex gap-3 items-center\">\r\n          <div className=\"w-32 flex-shrink-0\">\r\n            <input\r\n              type=\"number\"\r\n              value={item.price}\r\n              onChange={e => onUpdate(index, 'price', e.target.value)}\r\n              className=\"w-full px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n              placeholder=\"מחיר (₪)\"\r\n              step=\"10\"\r\n              min=\"0\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Remove Button */}\r\n          <div className=\"w-10 flex-shrink-0 flex justify-center\">\r\n            {showRemove && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => onRemove(index)}\r\n                className=\"w-8 h-8 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg border border-red-400/40 hover:border-red-400/60 transition-all duration-200 flex items-center justify-center\"\r\n                title=\"הסר פעולה\"\r\n              >\r\n                <i className=\"fas fa-trash text-xs\"></i>\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RepairItemRow;\r\n","/**\r\n * NotificationSettings Component\r\n *\r\n * Notification settings section with:\r\n * - Send notification checkbox\r\n * - Notification preview\r\n * - Customer contact info display\r\n */\r\n\r\nconst NotificationSettings = ({ sendNotification, onToggle, customer, bike }) => {\r\n  return (\r\n    <div className=\"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 mt-6\">\r\n      {/* Header */}\r\n      <h3 className=\"text-lg font-bold text-white mb-4 flex items-center gap-2\">\r\n        <i className=\"fas fa-bell text-blue-400\"></i>\r\n        התראות ללקוח\r\n      </h3>\r\n\r\n      <div className=\"space-y-4\">\r\n        {/* Send Notification Checkbox */}\r\n        <div className=\"flex items-start gap-3 p-3 bg-slate-700/30 rounded-lg\">\r\n          <div className=\"flex-shrink-0 mt-1\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"send-notification\"\r\n              checked={sendNotification}\r\n              onChange={e => onToggle(e.target.checked)}\r\n              className=\"w-5 h-5 text-blue-500 bg-slate-600 border-slate-500 rounded focus:ring-blue-500 focus:ring-2\"\r\n            />\r\n          </div>\r\n          <label htmlFor=\"send-notification\" className=\"flex-1 cursor-pointer\">\r\n            <div className=\"text-white font-medium mb-1\">📱 שלח התראה ללקוח</div>\r\n            <div className=\"text-slate-400 text-sm\">\r\n              הלקוח יקבל התראת דחיפה ואימייל עם בקשה לאישור הפעולות\r\n            </div>\r\n          </label>\r\n        </div>\r\n\r\n        {/* Notification Preview */}\r\n        {sendNotification && (\r\n          <div className=\"bg-blue-500/10 border border-blue-400/30 rounded-lg p-3\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <i className=\"fas fa-mobile-alt text-blue-400 text-lg mt-1\"></i>\r\n              <div className=\"flex-1\">\r\n                <div className=\"text-blue-200 font-medium text-sm mb-1\">\r\n                  תצוגה מקדימה של ההתראה:\r\n                </div>\r\n                <div className=\"text-blue-100 text-sm\">\r\n                  \"נדרש אישור - תיקון {bike.brand} {bike.model}\"\r\n                  <br />\r\n                  <span className=\"text-blue-300\">\r\n                    האבחון לתיקון האופניים {bike.brand} {bike.model} מוכן. יש צורך באישור שלך\r\n                    לפעולות התיקון.\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Customer Contact Info */}\r\n        <div className=\"flex flex-wrap items-center gap-3 text-sm\">\r\n          <div className=\"flex items-center gap-2 text-slate-400\">\r\n            <i className=\"fas fa-user\"></i>\r\n            <span>{customer.name}</span>\r\n          </div>\r\n          {customer.phone && (\r\n            <div className=\"flex items-center gap-2 text-slate-400\">\r\n              <i className=\"fas fa-phone\"></i>\r\n              <span>{customer.phone}</span>\r\n            </div>\r\n          )}\r\n          {customer.email ? (\r\n            <div className=\"flex items-center gap-2 text-slate-400\">\r\n              <i className=\"fas fa-envelope\"></i>\r\n              <span>{customer.email}</span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex items-center gap-2 text-yellow-400\">\r\n              <i className=\"fas fa-exclamation-triangle\"></i>\r\n              <span className=\"text-sm\">אין אימייל - רק התראת דחיפה</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationSettings;\r\n","/**\r\n * RepairDiagnosis Component\r\n *\r\n * Main component for repair diagnosis page.\r\n * Allows manager to:\r\n * - View repair details\r\n * - Add diagnosis text\r\n * - Create repair items (tasks) with prices\r\n * - Send notification to customer for approval\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport RepairInfo from '../../components/diagnosis/RepairInfo';\r\nimport ExistingItems from '../../components/diagnosis/ExistingItems';\r\nimport RepairItemRow from '../../components/diagnosis/RepairItemRow';\r\nimport NotificationSettings from '../../components/diagnosis/NotificationSettings';\r\n\r\nconst RepairDiagnosis = ({ repairId }) => {\r\n  // ============================================================================\r\n  // STATE MANAGEMENT\r\n  // ============================================================================\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [repair, setRepair] = useState(null);\r\n  const [error, setError] = useState('');\r\n\r\n  // Form fields\r\n  const [diagnosis, setDiagnosis] = useState('');\r\n  const [repairItems, setRepairItems] = useState([{ description: '', price: '' }]);\r\n  const [sendNotification, setSendNotification] = useState(true);\r\n\r\n  // UI state\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [totalNewPrice, setTotalNewPrice] = useState(0);\r\n\r\n  // ============================================================================\r\n  // DATA FETCHING\r\n  // ============================================================================\r\n\r\n  useEffect(() => {\r\n    fetchRepairData();\r\n  }, [repairId]);\r\n\r\n  const fetchRepairData = async () => {\r\n    try {\r\n      const response = await fetch(`/api/repair/${repairId}/diagnosis/`, {\r\n        credentials: 'same-origin',\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to load repair data');\r\n      }\r\n\r\n      const data = await response.json();\r\n      setRepair(data);\r\n      setDiagnosis(data.diagnosis || '');\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ============================================================================\r\n  // REPAIR ITEMS MANAGEMENT\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Update a specific repair item field\r\n   */\r\n  const updateRepairItem = (index, field, value) => {\r\n    const updated = [...repairItems];\r\n    updated[index][field] = value;\r\n    setRepairItems(updated);\r\n  };\r\n\r\n  /**\r\n   * Add a new empty repair item\r\n   */\r\n  const addRepairItem = () => {\r\n    setRepairItems([...repairItems, { description: '', price: '' }]);\r\n  };\r\n\r\n  /**\r\n   * Remove a repair item by index\r\n   */\r\n  const removeRepairItem = index => {\r\n    const updated = repairItems.filter((_, i) => i !== index);\r\n    setRepairItems(updated);\r\n  };\r\n\r\n  /**\r\n   * Handle category click - auto-fill description\r\n   */\r\n  const handleCategoryClick = categoryText => {\r\n    // Find first empty description input\r\n    const emptyIndex = repairItems.findIndex(item => !item.description.trim());\r\n\r\n    if (emptyIndex >= 0) {\r\n      // Fill existing empty input\r\n      updateRepairItem(emptyIndex, 'description', categoryText);\r\n    } else {\r\n      // Add new item with category text\r\n      setRepairItems([...repairItems, { description: categoryText, price: '' }]);\r\n    }\r\n  };\r\n\r\n  // ============================================================================\r\n  // PRICE CALCULATION\r\n  // ============================================================================\r\n\r\n  useEffect(() => {\r\n    const total = repairItems.reduce((sum, item) => {\r\n      const price = parseFloat(item.price) || 0;\r\n      return sum + price;\r\n    }, 0);\r\n    setTotalNewPrice(total);\r\n  }, [repairItems]);\r\n\r\n  // ============================================================================\r\n  // FORM SUBMISSION\r\n  // ============================================================================\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n\r\n    // Validation\r\n    const validItems = repairItems.filter(\r\n      item => item.description.trim() && item.price && parseFloat(item.price) > 0\r\n    );\r\n\r\n    if (validItems.length === 0) {\r\n      setError('נא להוסיף לפחות פעולת תיקון אחת עם מחיר');\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await fetch(`/api/repair/${repairId}/diagnosis/submit/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,\r\n        },\r\n        credentials: 'same-origin',\r\n        body: JSON.stringify({\r\n          diagnosis,\r\n          repair_items: validItems.map(item => ({\r\n            description: item.description.trim(),\r\n            price: parseFloat(item.price),\r\n          })),\r\n          send_notification: sendNotification,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        // Redirect to manager dashboard on success\r\n        window.location.href = '/manager/dashboard/';\r\n      } else {\r\n        setError(data.error || 'שגיאה בשמירת האבחון');\r\n        setSubmitting(false);\r\n      }\r\n    } catch (err) {\r\n      setError('שגיאה בשמירת האבחון');\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // ============================================================================\r\n  // LOADING & ERROR STATES\r\n  // ============================================================================\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <p className=\"text-slate-300 text-lg\">טוען נתונים...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !repair) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center\">\r\n        <div className=\"bg-red-900/20 border border-red-500/30 rounded-2xl p-8 max-w-md mx-auto\">\r\n          <div className=\"text-center\">\r\n            <i className=\"fas fa-exclamation-triangle text-red-400 text-4xl mb-4\"></i>\r\n            <h2 className=\"text-xl font-bold text-white mb-2\">שגיאה</h2>\r\n            <p className=\"text-red-200 mb-4\">{error}</p>\r\n            <a\r\n              href=\"/manager/dashboard/\"\r\n              className=\"bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg border border-red-400/40 transition-all duration-200 inline-block\"\r\n            >\r\n              חזור לדשבורד\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ============================================================================\r\n  // MAIN RENDER\r\n  // ============================================================================\r\n\r\n  return (\r\n    <>\r\n      <style>{`\r\n        @media print {\r\n          /* Hide navigation, buttons, and unnecessary elements when printing */\r\n          nav, .no-print, button[type=\"submit\"], a[href*=\"dashboard\"], .bg-gradient-to-br {\r\n            display: none !important;\r\n          }\r\n\r\n          /* Optimize page for print */\r\n          body {\r\n            background: white !important;\r\n            color: black !important;\r\n          }\r\n\r\n          .bg-slate-800\\\\/50, .bg-slate-700\\\\/50 {\r\n            background: white !important;\r\n            border: 1px solid #ccc !important;\r\n          }\r\n\r\n          .text-white, .text-slate-300, .text-slate-200 {\r\n            color: black !important;\r\n          }\r\n\r\n          /* Keep colors for headers */\r\n          .text-green-400, .text-orange-400, .text-blue-400 {\r\n            print-color-adjust: exact;\r\n            -webkit-print-color-adjust: exact;\r\n          }\r\n\r\n          /* Show print button with different text */\r\n          button[onclick*=\"print\"] {\r\n            display: none !important;\r\n          }\r\n\r\n          /* Ensure full width */\r\n          .max-w-7xl {\r\n            max-width: 100% !important;\r\n            padding: 0 !important;\r\n          }\r\n\r\n          /* Remove shadows and effects */\r\n          * {\r\n            box-shadow: none !important;\r\n            text-shadow: none !important;\r\n          }\r\n        }\r\n      `}</style>\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* ===== HEADER ===== */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between\">\r\n            <div className=\"mb-4 lg:mb-0\">\r\n              <h1 className=\"text-3xl lg:text-4xl font-bold mb-2 bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent\">\r\n                🔍 אבחון תיקון #{repair.id}\r\n              </h1>\r\n              <p className=\"text-slate-300 text-base\">\r\n                {repair.is_editing ? 'עריכת אבחון והצעת מחיר מפורטת' : 'אבחון מקצועי והצעת מחיר מדויקת'}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Breadcrumb */}\r\n            <div className=\"hidden sm:flex justify-center lg:justify-end\">\r\n              <div className=\"bg-blue-500/20 border border-blue-400/40 rounded-xl px-4 py-2\">\r\n                <nav className=\"flex items-center gap-2 text-sm\">\r\n                  <a\r\n                    href=\"/manager/dashboard/\"\r\n                    className=\"text-blue-300 hover:text-blue-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-tachometer-alt mr-1\"></i>דשבורד מנהל\r\n                  </a>\r\n                  <i className=\"fas fa-chevron-left text-slate-400\"></i>\r\n                  <span className=\"text-white font-medium\">\r\n                    <i className=\"fas fa-stethoscope mr-1\"></i>\r\n                    {repair.is_editing ? 'עריכת אבחון' : 'אבחון'}\r\n                  </span>\r\n                </nav>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ===== INSTRUCTIONS (if no existing items) ===== */}\r\n        {(!repair.existing_items || repair.existing_items.length === 0) && (\r\n          <div className=\"mb-6\">\r\n            <div className=\"bg-blue-900/30 border border-blue-500/40 rounded-xl overflow-hidden backdrop-blur-sm\">\r\n              <div className=\"px-4 py-3 bg-blue-500/20 border-b border-blue-500/30\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-8 h-8 bg-blue-500/30 rounded-lg flex items-center justify-center\">\r\n                    <i className=\"fas fa-lightbulb text-blue-400\"></i>\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-lg font-bold text-white\">💡 הוראות לאבחון מדויק</h3>\r\n                    <p className=\"text-blue-200 text-sm\">\r\n                      הוסף את כל הפעולות הנדרשות עם מחירים מדויקים, וכך הלקוח יוכל לאשר בדיוק איזה\r\n                      פעולות הוא רוצה לבצע.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== ERROR MESSAGE ===== */}\r\n        {error && (\r\n          <div className=\"mb-6 p-4 bg-red-500/10 border border-red-400/30 rounded-xl\">\r\n            <div className=\"flex items-center gap-2 text-red-300\">\r\n              <i className=\"fas fa-exclamation-triangle\"></i>\r\n              <span>{error}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== MAIN CONTENT ===== */}\r\n        <div className=\"flex flex-col xl:flex-row gap-6 w-full\">\r\n          {/* Left Sidebar - Repair Info */}\r\n          <div className=\"w-full xl:w-96 xl:shrink-0 order-2 xl:order-1\">\r\n            <RepairInfo repair={repair} onCategoryClick={handleCategoryClick} />\r\n          </div>\r\n\r\n          {/* Main Form Area */}\r\n          <div className=\"flex-1 min-w-0 order-1 xl:order-2\">\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"grid grid-cols-1 gap-6\">\r\n                {/* ===== DIAGNOSIS CARD ===== */}\r\n                <div className=\"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl overflow-hidden h-fit\">\r\n                  <div className=\"bg-green-500/20 px-4 py-3 border-b border-green-500/30\">\r\n                    <h3 className=\"text-lg font-bold text-white flex items-center gap-2\">\r\n                      <i className=\"fas fa-stethoscope text-green-400\"></i>אבחון והצעת מחיר\r\n                    </h3>\r\n                  </div>\r\n                  <div className=\"p-4\">\r\n                    <label className=\"block text-slate-300 text-sm font-medium mb-2\">\r\n                      <i className=\"fas fa-clipboard-list text-blue-400 mr-2\"></i>\r\n                      אבחון (אופציונלי)\r\n                    </label>\r\n                    <textarea\r\n                      value={diagnosis}\r\n                      onChange={e => setDiagnosis(e.target.value)}\r\n                      className=\"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 text-base focus:ring-2 focus:ring-green-500 focus:border-transparent resize-vertical min-h-[200px]\"\r\n                      placeholder=\"פרט את האבחון...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* ===== REPAIR ITEMS CARD ===== */}\r\n                <div className=\"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl overflow-hidden\">\r\n                  <div className=\"bg-orange-500/20 px-4 py-3 border-b border-orange-500/30\">\r\n                    <h3 className=\"text-lg font-bold text-white flex items-center gap-2\">\r\n                      <i className=\"fas fa-tools text-orange-400\"></i>פעולות תיקון ומחירים\r\n                    </h3>\r\n                    <p className=\"text-orange-200 text-sm mt-1\">\r\n                      הוסף את כל הפעולות הנדרשות עם מחירים מדויקים\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"p-4\">\r\n                    {/* Existing Items */}\r\n                    <ExistingItems\r\n                      items={repair.existing_items}\r\n                      totalPrice={repair.total_existing_price}\r\n                    />\r\n\r\n                    {/* New Items */}\r\n                    <div className=\"space-y-3\">\r\n                      {repairItems.map((item, index) => (\r\n                        <RepairItemRow\r\n                          key={index}\r\n                          index={index}\r\n                          item={item}\r\n                          onUpdate={updateRepairItem}\r\n                          onRemove={removeRepairItem}\r\n                          showRemove={repairItems.length > 1}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n\r\n                    {/* Add Item Button & Total */}\r\n                    <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 mt-4\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={addRepairItem}\r\n                        className=\"bg-green-500/20 hover:bg-green-500/30 text-green-300 px-4 py-2 rounded-lg border border-green-400/40 hover:border-green-400/60 transition-all duration-200 flex items-center justify-center gap-2\"\r\n                      >\r\n                        <i className=\"fas fa-plus\"></i>\r\n                        <span className=\"text-sm font-medium\">הוסף פעולה נוספת</span>\r\n                      </button>\r\n\r\n                      <div className=\"bg-green-500/10 border border-green-400/30 rounded-lg px-4 py-2 text-center sm:text-right\">\r\n                        <span className=\"text-green-300 font-medium text-sm\">סה\"כ פעולות חדשות: </span>\r\n                        <span className=\"text-green-200 font-bold text-base\">₪{totalNewPrice.toFixed(2)}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* ===== NOTIFICATION SETTINGS ===== */}\r\n              <NotificationSettings\r\n                sendNotification={sendNotification}\r\n                onToggle={setSendNotification}\r\n                customer={repair.customer}\r\n                bike={repair.bike}\r\n              />\r\n\r\n              {/* ===== FORM ACTIONS ===== */}\r\n              <div className=\"flex flex-col gap-4 mt-6\">\r\n                {/* Print/PDF Button */}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => window.print()}\r\n                  className=\"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-4 px-8 rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95\"\r\n                >\r\n                  <i className=\"fas fa-print mr-2\"></i>\r\n                  הדפס / שמור כ-PDF\r\n                </button>\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={submitting}\r\n                  className=\"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-4 px-8 rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\"\r\n                >\r\n                  {submitting ? (\r\n                    <>\r\n                      <i className=\"fas fa-spinner fa-spin mr-2\"></i>\r\n                      שומר...\r\n                    </>\r\n                  ) : repair.is_editing ? (\r\n                    <>\r\n                      <i className=\"fas fa-save mr-2\"></i>\r\n                      עדכן אבחון ושלח ללקוח\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <i className=\"fas fa-check mr-2\"></i>\r\n                      שמור אבחון ושלח ללקוח\r\n                    </>\r\n                  )}\r\n                </button>\r\n\r\n                <a\r\n                  href=\"/manager/dashboard/\"\r\n                  className=\"bg-slate-600/50 hover:bg-slate-600/70 text-slate-200 font-semibold py-4 px-8 rounded-xl transition-all text-center border border-slate-500/30 hover:border-slate-400/50\"\r\n                >\r\n                  <i className=\"fas fa-times mr-2\"></i>\r\n                  ביטול\r\n                </a>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\n// ============================================================================\r\n// INITIALIZE REACT APP\r\n// ============================================================================\r\n\r\nimport { createRoot } from 'react-dom/client';\r\nconst rootElement = document.getElementById('root');\r\nif (rootElement) {\r\n  const root = createRoot(rootElement);\r\n  const repairId = rootElement.dataset.repairId ? parseInt(rootElement.dataset.repairId) : null;\r\n  root.render(<RepairDiagnosis repairId={repairId} />);\r\n}\r\n\r\nexport default RepairDiagnosis;\r\n"],"names":["RepairInfo","repair","onCategoryClick","jsxs","jsx","subcategory","ExistingItems","items","totalPrice","item","RepairItemRow","index","onUpdate","onRemove","showRemove","e","NotificationSettings","sendNotification","onToggle","customer","bike","RepairDiagnosis","repairId","loading","setLoading","useState","setRepair","error","setError","diagnosis","setDiagnosis","repairItems","setRepairItems","setSendNotification","submitting","setSubmitting","totalNewPrice","setTotalNewPrice","useEffect","fetchRepairData","response","data","err","updateRepairItem","field","value","updated","addRepairItem","removeRepairItem","_","i","handleCategoryClick","categoryText","emptyIndex","total","sum","price","handleSubmit","validItems","Fragment","rootElement","root","createRoot"],"mappings":"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"}