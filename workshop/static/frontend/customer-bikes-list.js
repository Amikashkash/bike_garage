import{r as d,j as e}from"./manager-dashboard.js";import{c as y}from"./client.DVUc2vIQ.js";import"./react-vendor.CiW5Bwbg.js";function w(){const[r,p]=d.useState([]),[u,x]=d.useState(!0),[m,g]=d.useState(null);d.useEffect(()=>{(async()=>{try{x(!0);const a=await fetch("/api/customer/repairs/");if(!a.ok)throw new Error("Failed to fetch data");const t=await a.json(),b=t.results||t||[],i=new Map;Array.isArray(b)?b.forEach(l=>{const o=l.bike_info,c=o.id;i.has(c)||i.set(c,{id:o.id,brand:o.brand,model:o.model||"",color:o.color||"",created_at:l.created_at,repairs:[]}),i.get(c).repairs.push({id:l.id,status:l.status,status_display:l.status_display,problem_description:l.problem_description,created_at:l.created_at})}):console.log("Unexpected response format:",t),p(Array.from(i.values()))}catch(a){console.error("Error fetching bikes data:",a),g(a.message)}finally{x(!1)}})()},[]);const n={totalBikes:r.length,totalRepairs:r.reduce((s,a)=>s+a.repairs.length,0),inProgressRepairs:r.reduce((s,a)=>s+a.repairs.filter(t=>t.status==="in_progress").length,0),completedRepairs:r.reduce((s,a)=>s+a.repairs.filter(t=>t.status==="completed").length,0)},j=s=>{if(!s)return{};const a=s.toLowerCase();return{backgroundColor:{שחור:"#000000",לבן:"#ffffff",אדום:"#ef4444",כחול:"#3b82f6",ירוק:"#22c55e",כתום:"#f97316",צהוב:"#eab308",סגול:"#a855f7"}[s]||a}},v=s=>({completed:"bg-green-500/10 border-green-500/30 text-green-400",in_progress:"bg-blue-500/10 border-blue-500/30 text-blue-400",diagnosed:"bg-amber-500/10 border-amber-500/30 text-amber-400",pending_approval:"bg-purple-500/10 border-purple-500/30 text-purple-400"})[s]||"bg-slate-500/10 border-slate-500/30 text-slate-400",N=s=>({completed:"fas fa-check-circle",in_progress:"fas fa-cog fa-spin",diagnosed:"fas fa-stethoscope",pending_approval:"fas fa-clock"})[s]||"fas fa-hourglass-half",h=s=>new Date(s).toLocaleDateString("he-IL");return u?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"טוען את האופניים שלך..."})]})}):m?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-red-400 text-2xl"})}),e.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:"שגיאה בטעינת הנתונים"}),e.jsx("p",{className:"text-slate-400 mb-4",children:m}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:"נסה שוב"})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[e.jsx("div",{className:"text-center mb-6 sm:mb-8",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-500 via-cyan-500 to-purple-500 bg-clip-text text-transparent mb-4",children:["🚲 האופניים שלי",e.jsx("span",{className:"text-2xl sm:text-3xl lg:text-4xl text-blue-300",children:"⚙️"})]}),e.jsx("p",{className:"text-slate-300 text-base sm:text-lg max-w-2xl mx-auto leading-relaxed",children:"ניהול ומעקב אחר האופניים שלך - כל המידע במקום אחד"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"fas fa-bicycle text-blue-400"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"האופניים שלי"}),r.length>0&&e.jsxs("span",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg px-3 py-1 text-blue-300 text-sm font-medium",children:[r.length," אופניים"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:"/my-bikes/add/",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"הוסף אופניים"}),e.jsx("span",{className:"sm:hidden",children:"הוסף"})]}),e.jsxs("a",{href:"/customer/report/",className:"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"דווח תקלה"}),e.jsx("span",{className:"sm:hidden",children:"דווח"})]})]})]}),r.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:r.map((s,a)=>e.jsxs("div",{className:"bike-card bg-slate-800/40 backdrop-blur-xl border border-blue-400/30 rounded-2xl shadow-2xl overflow-hidden hover:border-blue-400/50 hover:bg-slate-800/50 hover:-translate-y-1 lg:hover:-translate-y-1 transition-all duration-300 opacity-0 animate-fadeInUp",style:{animationDelay:`${a*100}ms`,animationFillMode:"forwards"},children:[e.jsx("div",{className:"border-b border-slate-600/30 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"fas fa-bicycle text-white text-lg"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-white",children:[s.brand," ",s.model]}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["נרשם ב-",h(s.created_at)]})]})]}),s.color&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/20",style:j(s.color)}),e.jsx("span",{className:"bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-1 text-slate-200 text-sm font-medium",children:s.color})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:"bike-detail-item bg-slate-700/30 border border-slate-600/30 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("i",{className:"fas fa-industry text-orange-400"}),e.jsx("span",{className:"text-slate-400",children:"יצרן:"}),e.jsx("span",{className:"text-white font-medium",children:s.brand})]})}),s.model&&e.jsx("div",{className:"bike-detail-item bg-slate-700/30 border border-slate-600/30 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("i",{className:"fas fa-tag text-cyan-400"}),e.jsx("span",{className:"text-slate-400",children:"מודל:"}),e.jsx("span",{className:"text-white font-medium",children:s.model})]})})]}),s.repairs.length>0?e.jsxs("div",{className:"bike-repairs-section",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-white font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tools text-orange-400"}),"תיקונים"]}),e.jsxs("span",{className:"bg-orange-500/20 border border-orange-400/30 rounded-lg px-2 py-1 text-orange-300 text-xs font-medium",children:[s.repairs.length," תיקונים"]})]}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:s.repairs.map(t=>e.jsxs("div",{className:"repair-item bg-slate-800/50 border border-slate-600/40 rounded-lg p-3 hover:border-slate-500/60 hover:bg-slate-700/70 hover:-translate-x-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`repair-status-badge inline-flex items-center px-2 py-1 rounded-lg text-xs font-semibold border ${v(t.status)}`,children:[e.jsx("i",{className:`${N(t.status)} mr-1`}),t.status_display]}),e.jsx("span",{className:"text-slate-400 text-xs",children:h(t.created_at)})]}),e.jsxs("a",{href:`/repair-status/${t.id}/`,className:"bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/40 hover:border-blue-400/60 text-blue-300 px-3 py-1 rounded-lg text-xs font-medium transition-all duration-300 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-eye"}),e.jsx("span",{children:"צפה"})]})]}),t.problem_description&&e.jsx("div",{className:"repair-description",children:e.jsxs("p",{className:"text-slate-300 text-sm leading-relaxed",children:['"',t.problem_description.length>60?t.problem_description.substring(0,60)+"...":t.problem_description,'"']})})]},t.id))})]}):e.jsxs("div",{className:"no-repairs-section text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-700/30 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-tools text-slate-500 text-2xl"})}),e.jsx("h5",{className:"text-white font-medium mb-2",children:"אין תיקונים עדיין"}),e.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"האופניים שלך עדיין לא נדרשו לתיקון"}),e.jsxs("a",{href:"/customer/report/",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-medium py-2 px-4 rounded-lg transition-all duration-300 text-sm inline-flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-plus"}),"דווח תקלה"]})]})]})]},s.id))}),e.jsxs("div",{className:"bg-slate-800/40 backdrop-blur-xl border border-purple-400/30 rounded-2xl shadow-2xl p-4 sm:p-6 mb-8 hover:bg-slate-800/50 hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chart-bar text-purple-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"סטטיסטיקות"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"stat-item text-center p-4 bg-slate-700/30 border border-slate-600/50 rounded-xl hover:bg-slate-700/50 hover:border-slate-600/70 hover:-translate-y-1 transition-all duration-300",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-300",children:n.totalBikes}),e.jsx("div",{className:"text-slate-400 text-sm",children:"אופניים"})]}),e.jsxs("div",{className:"stat-item text-center p-4 bg-slate-700/30 border border-slate-600/50 rounded-xl hover:bg-slate-700/50 hover:border-slate-600/70 hover:-translate-y-1 transition-all duration-300",children:[e.jsx("div",{className:"text-2xl font-bold text-green-300",children:n.totalRepairs}),e.jsx("div",{className:"text-slate-400 text-sm",children:"תיקונים"})]}),e.jsxs("div",{className:"stat-item text-center p-4 bg-slate-700/30 border border-slate-600/50 rounded-xl hover:bg-slate-700/50 hover:border-slate-600/70 hover:-translate-y-1 transition-all duration-300",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-300",children:n.inProgressRepairs}),e.jsx("div",{className:"text-slate-400 text-sm",children:"בתיקון"})]}),e.jsxs("div",{className:"stat-item text-center p-4 bg-slate-700/30 border border-slate-600/50 rounded-xl hover:bg-slate-700/50 hover:border-slate-600/70 hover:-translate-y-1 transition-all duration-300",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-300",children:n.completedRepairs}),e.jsx("div",{className:"text-slate-400 text-sm",children:"הושלמו"})]})]})]})]}):e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-slate-800/40 backdrop-blur-xl border border-slate-600/40 rounded-2xl p-8 sm:p-12 max-w-lg mx-auto hover:bg-slate-800/50 hover:-translate-y-1 transition-all duration-300",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"fas fa-bicycle text-blue-400 text-4xl"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"אין לך אופניים רשומים במערכת"}),e.jsxs("p",{className:"text-slate-400 mb-8 leading-relaxed",children:["תוכל להוסיף אופניים חדשים על ידי לחיצה על הכפתור למטה.",e.jsx("br",{}),"לאחר ההוספה תוכל לדווח על תקלות ולעקוב אחר תיקונים."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("a",{href:"/my-bikes/add/",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"הוסף אופניים ראשונים"]}),e.jsxs("a",{href:"/",className:"bg-slate-600/50 hover:bg-slate-600/70 text-slate-200 font-semibold py-3 px-6 rounded-xl transition-all duration-300 border border-slate-500/30 hover:border-slate-400/50",children:[e.jsx("i",{className:"fas fa-home mr-2"}),"חזרה לדף הבית"]})]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:"/",className:"bg-slate-600/50 hover:bg-slate-600/70 text-slate-200 font-semibold py-3 px-6 rounded-xl transition-all duration-300 border border-slate-500/30 hover:border-slate-400/50",children:[e.jsx("i",{className:"fas fa-home mr-2"}),"חזרה לדף הבית"]})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .animate-fadeInUp {
          animation: fadeInUp 0.6s ease-out;
        }
        
        .space-y-3::-webkit-scrollbar {
          width: 4px;
        }
        .space-y-3::-webkit-scrollbar-track {
          background: rgba(51, 65, 85, 0.3);
          border-radius: 0.375rem;
        }
        .space-y-3::-webkit-scrollbar-thumb {
          background: rgba(71, 85, 105, 0.5);
          border-radius: 0.375rem;
        }
        .space-y-3::-webkit-scrollbar-thumb:hover {
          background: rgba(71, 85, 105, 0.7);
        }
      `})]})}const f=document.getElementById("customer-bikes-list-root");f?y.createRoot(f).render(e.jsx(w,{})):console.error("Customer Bikes List: Root element not found");
//# sourceMappingURL=customer-bikes-list.js.map
